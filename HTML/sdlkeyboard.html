<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-2">



	<title>Aaron's Game Programming Tutorials</title>
	<link rel="stylesheet" type="text/css" href="sdlkeyboard_elemei/style.css">
    <style type="text/css">
<!--
.style2 {font-family: Arial, Helvetica, sans-serif}
.style3 {font-family: "Courier New", Courier, mono}
.style4 {font-family: "Courier New", Courier, mono; font-size: 14px; }
.style5 {color: #6699FF}
.style7 {color: #6699FF; font-weight: bold; }
.style8 {
	color: #FFFFFF;
	font-size: 14px;
	font-family: "Courier New", Courier, mono;
}
.style9 {color: #00CC33}
.style12 {font-family: Arial, Helvetica, sans-serif; color: #FFFFFF;}
.style13 {color: #FFFFFF}
.style17 {font-family: "Courier New", Courier, mono; font-size: 14px; font-weight: bold; }
-->
    </style>
</head><body bottommargin="0" leftmargin="0" rightmargin="0" topmargin="0" link="#ffffff" marginheight="0" marginwidth="0" text="#ffffff" background="sdlkeyboard_elemei/background.jpg">
<table width="100%" border="0" cellpadding="0" cellspacing="0">
	<tbody><tr valign="top">
		<td height="101" width="92"><img src="sdlkeyboard_elemei/topleft.jpg" alt="" height="101" width="92" border="0"></td>
		<td height="101" width="100%" background="sdlkeyboard_elemei/topbg.jpg">
<!----- Insert your logo below ------------------------------------------>
<img src="sdlkeyboard_elemei/logo.jpg" alt="" height="75" width="263" border="0">
<!------------------------------------------------------------------------------------------->
		</td>
	</tr>
</tbody></table>

<table width="100%" border="0" cellpadding="0" cellspacing="0">
	<tbody><tr valign="top">
	
		<td width="160">
			<table width="160" border="0" cellpadding="0" cellspacing="0">
				<tbody><tr valign="top">
					<td>
<!------------------------ Menu section, links go below ---------------------------->

<!-- this is the code for a button below,
	just copy and paste the code to make multiple
	buttons, you will notice we have did this a
	few times for example -->
<table height="43" width="160" border="0" cellpadding="0" cellspacing="0"><tbody><tr valign="top"><td height="14" width="160"><img src="sdlkeyboard_elemei/buttontop.jpg" alt="" height="14" width="160" border="0"></td></tr><tr valign="top">
  <td height="16" width="160" background="sdlkeyboard_elemei/buttonbg.jpg"><img src="sdlkeyboard_elemei/bspcr.jpg" alt="" height="6" width="7" border="0">
<a href="http://www.aaroncox.net/tutorials/index.html" class="menulink">Home</a>	 
</td>
</tr><tr valign="top"><td height="13" width="160"><img src="sdlkeyboard_elemei/buttonbottom.jpg" alt="" height="13" width="160" border="0"></td></tr></tbody></table>
<!--- this is the end of the button code-->

<table height="43" width="160" border="0" cellpadding="0" cellspacing="0"><tbody><tr valign="top"><td height="14" width="160"><img src="sdlkeyboard_elemei/buttontop.jpg" alt="" height="14" width="160" border="0"></td></tr><tr valign="top">
  <td height="16" width="160" background="sdlkeyboard_elemei/buttonbg.jpg"><p><img src="sdlkeyboard_elemei/bspcr.jpg" alt="" height="6" width="7" border="0">
      <a href="http://www.aaroncox.net/tutorials/2dtutorials/index.html" class="menulink">2D Game Tutorials      </a></p>
    </td>
</tr>
<tr valign="top"><td height="13" width="160"><img src="sdlkeyboard_elemei/buttonbottom.jpg" alt="" height="13" width="160" border="0"></td></tr></tbody></table>

<table height="43" width="160" border="0" cellpadding="0" cellspacing="0"><tbody><tr valign="top"><td height="14" width="160"><img src="sdlkeyboard_elemei/buttontop.jpg" alt="" height="14" width="160" border="0"></td></tr><tr valign="top">
  <td height="16" width="160" background="sdlkeyboard_elemei/buttonbg.jpg"><img src="sdlkeyboard_elemei/bspcr.jpg" alt="" height="6" width="7" border="0">
<a href="http://www.aaroncox.net/tutorials/arcade/index.html" class="menulink">Arcade Game &nbsp;&nbsp;Tutorials</a></td>
</tr><tr valign="top"><td height="13" width="160"><img src="sdlkeyboard_elemei/buttonbottom.jpg" alt="" height="13" width="160" border="0"></td></tr></tbody></table>

<table height="43" width="160" border="0" cellpadding="0" cellspacing="0"><tbody><tr valign="top"><td height="14" width="160"><img src="sdlkeyboard_elemei/buttontop.jpg" alt="" height="14" width="160" border="0"></td></tr><tr valign="top">
  <td height="16" width="160" background="sdlkeyboard_elemei/buttonbg.jpg"><img src="sdlkeyboard_elemei/bspcr.jpg" alt="" height="6" width="7" border="0">
<a href="http://www.aaroncox.net/tutorials/miscellaneous/index.html" class="menulink">Miscellaneous &nbsp;&nbsp;Tutorials </a>
</td>
</tr><tr valign="top"><td height="13" width="160"><img src="sdlkeyboard_elemei/buttonbottom.jpg" alt="" height="13" width="160" border="0"></td></tr></tbody></table>

<table height="43" width="160" border="0" cellpadding="0" cellspacing="0"><tbody><tr valign="top"><td height="14" width="160"><img src="sdlkeyboard_elemei/buttontop.jpg" alt="" height="14" width="160" border="0"></td></tr><tr valign="top">
  <td height="16" width="160" background="sdlkeyboard_elemei/buttonbg.jpg"><img src="sdlkeyboard_elemei/bspcr.jpg" alt="" height="6" width="7" border="0">
<a href="http://www.aaroncox.net/tutorials/codedump/index.html" class="menulink">Code Dump </a></td>
</tr><tr valign="top"><td height="13" width="160"><img src="sdlkeyboard_elemei/buttonbottom.jpg" alt="" height="13" width="160" border="0"></td></tr></tbody></table>

<table height="43" width="160" border="0" cellpadding="0" cellspacing="0">
  <tbody><tr valign="top">
    <td height="14" width="160"><img src="sdlkeyboard_elemei/buttontop.jpg" alt="" height="14" width="160" border="0"></td>
  </tr>
  <tr valign="top">
    <td height="16" width="160" background="sdlkeyboard_elemei/buttonbg.jpg"><img src="sdlkeyboard_elemei/bspcr.jpg" alt="" height="6" width="7" border="0"> <a href="http://www.aaroncox.net/forum" class="menulink">Forum</a></td>
  </tr>
  <tr valign="top">
    <td height="13" width="160"><img src="sdlkeyboard_elemei/buttonbottom.jpg" alt="" height="13" width="160" border="0"></td>
  </tr>
</tbody></table>
<table height="43" width="160" border="0" cellpadding="0" cellspacing="0">
  <tbody><tr valign="top">
    <td height="14" width="160"><img src="sdlkeyboard_elemei/buttontop.jpg" alt="" height="14" width="160" border="0"></td>
  </tr>
  <tr valign="top">
    <td height="16" width="160" background="sdlkeyboard_elemei/buttonbg.jpg"><img src="sdlkeyboard_elemei/bspcr.jpg" alt="" height="6" width="7" border="0"> <a href="http://www.aaroncox.net/tutorials/links.html" class="menulink">Links</a></td>
  </tr>
  <tr valign="top">
    <td height="13" width="160"><img src="sdlkeyboard_elemei/buttonbottom.jpg" alt="" height="13" width="160" border="0"></td>
  </tr>
</tbody></table>
<br><br><br>
<!---------------------------------------------------------------------------------->
					</td>
				</tr>
			</tbody></table>
		<br><br><br><br>

		
		</td>

		<td width="100%">
			<table width="100%" border="0" cellpadding="20" cellspacing="0">
				<tbody><tr valign="top">
					<td>
<!------------------------ Content zone, add your content below ---------------------------->
<center>
  <strong> </strong>
  <h1 align="left"><span class="style2"><strong>Handling Keyboard Input with SDL </strong></span></h1>
  <div class="style2" align="left">
    <p><em>Note:</em> This tutorial assumes that you already know how to display a window and draw a sprite with SDL.</p>
    <h2>Checking for Key Presses</h2>
    <p>When we need to get event information, we pass an <span class="style3">SDL_Event</span> structure to <span class="style3">SDL_PollEvent()</span>,
which fills the event structure with event information, or returns 0 if
there was no event. The type of event that happened is stored in the <span class="style3">SDL_Event</span> structure's <span class="style3">type</span> variable. If <span class="style3">type</span> is equal to <span class="style3">SDL_QUIT</span>, we know that the user wants to close the window.</p>
    <p>To see if the user has pressed a key, we check to see if <span class="style3">type</span> is equal to <span class="style3">SDL_KEYDOWN</span>. To find out which key has been pressed, we check the <span class="style3">event.key.keysym.sym</span> variable, which is an <span class="style3">SDLKey</span>. </p>
    <p>First of all, don't worry about the whole "<span class="style3">event.key.keysym.sym</span>" thing. That's just where the creators of SDL stored the key information. <span class="style3">sym</span> is an <span class="style3">SDLKey</span> variable that is contained in <span class="style3">keysym</span>, which is contained in <span class="style3">key</span>, which is contained in the <span class="style3">SDL_Event</span> structure. Since this is a bit convoluted, I like to put the information into my own <span class="style3">SDLKey</span> variable like so:</p>
    <p class="style3">SDLKey keyPressed = event.key.keysym.sym;</p>
    <p>This saves typing and makes things easier to read. </p>
    <p>An <span class="style3">SDLKey</span>
variable can take on a number of values corresponding to the keys on
the keyboard. For the next example, we'll check to see if our <span class="style3">SDLKey</span> variable is equal to <span class="style3">SDLK_ESCAPE</span>. To see all of the values that an <span class="style3">SDLKey</span> variable can be, look at "SDL_keysym.h" in the <strong>include </strong>folder in your SDL directory. </p>
    <p>The following code displays a window and closes it if the user presses <strong>Esc</strong>. I've bolded the code that checks for key presses. </p>
    <p class="style4"><span class="style5">#include</span> "SDL.h"</p>
    <p class="style4"><span class="style5">const int</span> WINDOW_WIDTH = 640;<br>
      <span class="style5">const int</span> WINDOW_HEIGHT = 480;<br>
      <span class="style5">const char</span>* WINDOW_TITLE = "SDL Start";</p>
    <p class="style4"><span class="style5">int</span> main(<span class="style5">int</span> argc, <span class="style5">char</span> **argv)<br>
      {<br>
  &nbsp;&nbsp;&nbsp;SDL_Init( SDL_INIT_VIDEO );</p>
    <p class="style4"> &nbsp;&nbsp;&nbsp;SDL_Surface* screen = SDL_SetVideoMode( WINDOW_WIDTH, WINDOW_HEIGHT, 0, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;      SDL_HWSURFACE | SDL_DOUBLEBUF );<br>
  &nbsp;&nbsp;&nbsp;SDL_WM_SetCaption( WINDOW_TITLE, 0 );</p>
    <p class="style4"> &nbsp;&nbsp;&nbsp;SDL_Event event;<br>
  &nbsp;&nbsp;&nbsp;<span class="style5">bool</span> gameRunning = <span class="style5">true</span>;</p>
    <p class="style4"> &nbsp;&nbsp;&nbsp;<span class="style5">while</span> (gameRunning)<br>
  &nbsp;&nbsp;&nbsp;{<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">if</span> (SDL_PollEvent(&amp;event))<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">if</span> (event.type == SDL_QUIT)<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gameRunning = <span class="style5">false</span>;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style7">if</span><strong> (event.type == SDL_KEYDOWN)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SDLKey keyPressed = event.key.keysym.sym;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">switch</span> (keyPressed)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">case</span> SDLK_ESCAPE:<br>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gameRunning = <span class="style5">false</span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">&nbsp;&nbsp;&nbsp;break</span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</strong><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
  &nbsp;&nbsp;&nbsp;}</p>
    <p class="style4"> &nbsp;&nbsp;&nbsp;SDL_Quit();</p>
    <p class="style4"> &nbsp;&nbsp;&nbsp;<span class="style5">return</span> 0;<br>
      }</p>
    <p class="style2">The code above checks for key presses. If you need to check to see if a key had been released, you replace <span class="style3">SDL_KEYDOWN</span> with <span class="style3">SDL_KEYUP</span>. The rest will be the same. </p>
    <h2>Getting a Sprite We Can Move</h2>
    <p>The
normal thing to do with keyboard input is to make something move around
when the arrow keys are pressed. Before we can do that though, we need
something that we can move around.</p>
    <p>The following code draws a sprite at the location stored in the variables <span class="style3">batX</span> and <span class="style3">batY</span>. When we want to move the sprite, we just have to change these variables. The bat image is stored in <a href="http://www.aaroncox.net/tutorials/2dtutorials/bat.bmp">this file</a>. If you want to run the code, be sure to copy it into your project directory. </p>
    <p class="style8"><span class="style5">#include</span> "SDL.h"</p>
    <p class="style8"><span class="style5">const int</span> WINDOW_WIDTH = 640;<br>
      <span class="style5">const int</span> WINDOW_HEIGHT = 480;<br>
      <span class="style5">const char</span>* WINDOW_TITLE = "SDL Start";</p>
    <p class="style8"><span class="style5">void</span> drawSprite(SDL_Surface* imageSurface, <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SDL_Surface* screenSurface,<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">int</span> srcX, <span class="style5">int</span> srcY, <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">int</span> dstX, <span class="style5">int</span> dstY,<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">int</span> width, <span class="style5">int</span> height);</p>
    <p class="style8"><span class="style5">int</span> main(<span class="style5">int</span> argc, <span class="style5">char</span> **argv)<br>
      {<br>
  &nbsp;&nbsp;&nbsp;SDL_Init( SDL_INIT_VIDEO );</p>
    <p class="style8"> &nbsp;&nbsp;&nbsp;SDL_Surface* screen = SDL_SetVideoMode( WINDOW_WIDTH, WINDOW_HEIGHT, 0, <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SDL_HWSURFACE | SDL_DOUBLEBUF );<br>
  &nbsp;&nbsp;&nbsp;SDL_WM_SetCaption( WINDOW_TITLE, 0 );</p>
    <p class="style8"> &nbsp;&nbsp;&nbsp;SDL_Surface* bitmap = SDL_LoadBMP("bat.bmp");<br>
  &nbsp;&nbsp;&nbsp;SDL_SetColorKey(bitmap, SDL_SRCCOLORKEY, SDL_MapRGB(bitmap-&gt;format, 255, 0, 255)); </p>
    <p class="style8"> &nbsp;&nbsp;&nbsp;<span class="style5">int</span> batImageX = 24;<br>
  &nbsp;&nbsp;<span class="style5">&nbsp;int</span> batImageY = 63;<br>
  &nbsp;&nbsp;&nbsp;<span class="style5">int</span> batWidth = 65;<br>
  &nbsp;&nbsp;&nbsp;<span class="style5">int</span> batHeight = 44;</p>
    <p class="style8"> &nbsp;&nbsp;&nbsp;<span class="style9">// We change these to make the bat move</span><br>
  &nbsp;&nbsp;&nbsp;<span class="style5">int</span> batX = 100;<br>
  &nbsp;&nbsp;&nbsp;<span class="style5">int</span> batY = 100;</p>
    <p class="style8"> &nbsp;&nbsp;&nbsp;SDL_Event event;<br>
  &nbsp;&nbsp;&nbsp;<span class="style5">bool</span> gameRunning = <span class="style5">true</span>;</p>
    <p class="style8"> &nbsp;&nbsp;&nbsp;<span class="style5">while</span> (gameRunning)<br>
  &nbsp;&nbsp;&nbsp;{<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style9">&nbsp;// Handle input</span><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">if</span> (SDL_PollEvent(&amp;event))<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">if</span> (event.type == SDL_QUIT)<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gameRunning = <span class="style5">false</span>;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</p>
    <p class="style8"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">if</span> (event.type == SDL_KEYDOWN)<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SDLKey keyPressed = event.key.keysym.sym;<br>
  &nbsp;&nbsp;&nbsp;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">switch</span> (keyPressed)<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">case</span> SDLK_ESCAPE:<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gameRunning = <span class="style5">false</span>;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">break</span>;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
    </p>
    <p class="style8"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style9">// Draw the scene<br>
        <span class="style13">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style3">SDL_FillRect(screen, NULL, SDL_MapRGB(screen-&gt;format, 0, 0, 0));</span></span></span></p>
    <p class="style8">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drawSprite(bitmap, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;screen, <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;batImageX, batImageY,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;batX, batY,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;batWidth, batHeight);</p>
    <p class="style8"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SDL_Flip(screen);<br>
  &nbsp;&nbsp;&nbsp;}</p>
    <p class="style8"> &nbsp;&nbsp;&nbsp;SDL_FreeSurface(bitmap);</p>
    <p class="style8"> &nbsp;&nbsp;&nbsp;SDL_Quit();</p>
    <p class="style8"> &nbsp;&nbsp;&nbsp;<span class="style5">return</span> 0;<br>
      }</p>
    <p class="style8"><span class="style5">void</span> drawSprite(SDL_Surface* imageSurface, <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SDL_Surface* screenSurface,<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">int</span> srcX, <span class="style5">int</span> srcY, <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">int</span> dstX, <span class="style5">int</span> dstY,<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">int</span> width, <span class="style5">int</span> height)<br>
  {<br>
  &nbsp;&nbsp;&nbsp;SDL_Rect srcRect;<br>
  &nbsp;&nbsp;&nbsp;srcRect.x = srcX;<br>
  &nbsp;&nbsp;&nbsp;srcRect.y = srcY;<br>
  &nbsp;&nbsp;&nbsp;srcRect.w = width;<br>
  &nbsp;&nbsp;&nbsp;srcRect.h = height;</p>
    <p class="style8"> &nbsp;&nbsp;&nbsp;SDL_Rect dstRect;<br>
  &nbsp;&nbsp;&nbsp;dstRect.x = dstX;<br>
  &nbsp;&nbsp;&nbsp;dstRect.y = dstY;<br>
  &nbsp;&nbsp;&nbsp;dstRect.w = width;<br>
  &nbsp;&nbsp;&nbsp;dstRect.h = height;</p>
    <p class="style8"> &nbsp;&nbsp;&nbsp;SDL_BlitSurface(imageSurface, &amp;srcRect, screenSurface, &amp;dstRect);<br>
      }</p>
    <h2>Moving the Sprite When the User Presses a Key 
    </h2>
    <p class="style12">When an arrow key is pressed, <span class="style3">keyPressed</span> will be equal t<span class="style13">o <font face="courier new, courier, monospace">SDLK_LEFT</font>, <font face="courier new, courier, monospace">SDLK_RIGHT</font>, <font face="courier new, courier, monospace">SDLK_UP</font>, or <font face="courier new, courier, monospace">SDLK_DOWN</font>. </span></p>
    <p class="style12">Here are the changes to the input code's <span class="style3">switch</span> statement. Remember that  positive y is down.</p>
    <p class="style8"><span class="style5">switch</span> (keyPressed)<br>
{<br>
&nbsp;&nbsp;&nbsp;<span class="style5">case</span> SDLK_ESCAPE:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gameRunning = false;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">break</span>;<br>
&nbsp;&nbsp;&nbsp;<span class="style5">case</span> SDLK_LEFT:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;batX -= 1;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">break</span>;<br>
&nbsp;&nbsp;&nbsp;<span class="style5">case</span> SDLK_RIGHT:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;batX += 1;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">break</span>;<br>
&nbsp;&nbsp;&nbsp;<span class="style5">case</span> SDLK_UP:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;batY -= 1;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">break</span>;<br>
&nbsp;&nbsp;&nbsp;<span class="style5">case</span> SDLK_DOWN:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;batY += 1;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">break</span>;<br>
}</p>
    <h2 class="style12">Moving the Sprite When the User Holds a Key</h2>
    <p class="style12">If
you compiled and ran the code so far, you'll have found that you had to
repeatedly tap the arrow keys to make the sprite move. This obviously
won't work for most games. We'd much rather have the sprite move
constantly when the player holds a key down. </p>
    <p class="style12">To
do this, we'll have an array that stores a boolean value for each key
on the keyboard. If the value at a key's index in the array is <span class="style3">true</span>, the key is pressed. If it's <span class="style3">false</span>, the key is not pressed. We'll set a key's value to <span class="style3">true</span> when <span class="style3">event.type</span> equals <span class="style3">SDL_KEYDOWN<span class="style2"> and <span class="style3">false</span> when <span class="style3">event.type</span> equals <span class="style3">SDL_KEYUP<span class="style2">.</span></span></span></span></p>
    <p class="style12">Our
job is made easy by the fact that the enumerations of the keys on the
keyboard range from 0 to 322. All we have to do is create an arary of
323 booleans and index it with the key enumerations (eg. <span class="style3">array[SDLK_LEFT]</span>).</p>
    <p class="style12">Each
time the game loop runs, we'll update the key array and then check its
values to see if we should move our sprite. Here is the code to do
this. I've bolded the relevant code.</p>
    <p class="style8"><span class="style5">#include </span>"SDL.h"</p>
    <p class="style4"><span class="style5">const int</span> WINDOW_WIDTH = 640;<br>
      <span class="style5">const int</span> WINDOW_HEIGHT = 480;<br>
      <span class="style5">const char</span>* WINDOW_TITLE = "SDL Start";</p>
    <p class="style4"><span class="style5">void</span> drawSprite(SDL_Surface* imageSurface, <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SDL_Surface* screenSurface,<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="style5">int</span> srcX, <span class="style5">int</span> srcY, <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="style5">int</span> dstX, <span class="style5">int</span> dstY,<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="style5">int</span> width,<span class="style5"> int</span> height);</p>
    <p class="style4"><span class="style5">int</span> main(<span class="style5">int</span> argc, <span class="style5">char</span> **argv)<br>
      {<br>
  &nbsp;&nbsp;&nbsp;SDL_Init( SDL_INIT_VIDEO );</p>
    <p class="style4"> &nbsp;&nbsp;&nbsp;SDL_Surface* screen = SDL_SetVideoMode( WINDOW_WIDTH, WINDOW_HEIGHT, 0, <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SDL_HWSURFACE | SDL_DOUBLEBUF );<br>
  &nbsp;&nbsp;&nbsp;SDL_WM_SetCaption( WINDOW_TITLE, 0 );</p>
    <p class="style4"> &nbsp;&nbsp;&nbsp;SDL_Surface* bitmap = SDL_LoadBMP("bat.bmp");<br>
  &nbsp;&nbsp;&nbsp;SDL_SetColorKey(bitmap, SDL_SRCCOLORKEY, SDL_MapRGB(bitmap-&gt;format, 255, 0, 255)); </p>
    <p class="style4"> &nbsp;&nbsp;&nbsp;<span class="style5">int</span> batImageX = 24;<br>
  &nbsp;&nbsp;&nbsp;<span class="style5">int</span> batImageY = 63;<br>
  &nbsp;&nbsp;<span class="style5">&nbsp;int</span> batWidth = 65;<br>
  &nbsp;&nbsp;&nbsp;<span class="style5">int</span> batHeight = 44;</p>
    <p class="style4"> &nbsp;&nbsp;&nbsp;<span class="style9">// We change these to make the bat move</span><br>
  &nbsp;&nbsp;&nbsp;<span class="style5">int</span> batX = 100;<br>
  &nbsp;&nbsp;&nbsp;<span class="style5">int</span> batY = 100;</p>
    <p class="style4"> &nbsp;&nbsp;&nbsp;SDL_Event event;<br>
  &nbsp;&nbsp;&nbsp;<span class="style5">bool</span> gameRunning = <span class="style5">true</span>;</p>
    <p class="style4"><span class="style7">&nbsp;&nbsp;&nbsp;bool</span><strong> keysHeld[323] = {<span class="style5">false</span>}; <span class="style9">// everything will be initialized to false</span></strong></p>
    <p class="style4"> &nbsp;&nbsp;&nbsp;<span class="style5">while</span> (gameRunning)<br>
  &nbsp;&nbsp;&nbsp;{<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style9">// Handle input</span><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">if</span> (SDL_PollEvent(&amp;event))<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">if</span> (event.type == SDL_QUIT)<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gameRunning = <span class="style5">false</span>;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</p>
    <p class="style4"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style7">if</span><strong> (event.type == SDL_KEYDOWN)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;keysHeld[event.key.keysym.sym] = <span class="style5">true</span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">if</span> (event.type == SDL_KEYUP)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;keysHeld[event.key.keysym.sym] = <span class="style5">false</span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</strong><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</p>
    <p class="style4"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&nbsp;<span class="style5">if </span>( keysHeld[SDLK_ESCAPE] )<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gameRunning = <span class="style5">false</span>;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</strong></p>
    <p class="style17"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">if</span> ( keysHeld[SDLK_LEFT] )<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;batX -= 1;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">if</span> ( keysHeld[SDLK_RIGHT] )<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;batX += 1;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">if</span> ( keysHeld[SDLK_UP] )<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;batY -= 1;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style5">if </span>(keysHeld[SDLK_DOWN])<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;batY += 1;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</p>
    <p class="style4"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="style9">// Draw the scene</span><br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SDL_FillRect(screen, NULL, SDL_MapRGB(screen-&gt;format, 0, 0, 0));</p>
    <p class="style4"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;drawSprite(bitmap, <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;screen, <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;batImageX, batImageY,<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;batX, batY,<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;batWidth, batHeight);</p>
    <p class="style4"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SDL_Flip(screen);<br>
  &nbsp;&nbsp;&nbsp;}</p>
    <p class="style4"> &nbsp;&nbsp;&nbsp;SDL_FreeSurface(bitmap);</p>
    <p class="style4"> &nbsp;&nbsp;&nbsp;SDL_Quit();</p>
    <p class="style4"> &nbsp;&nbsp;&nbsp;<span class="style5">return</span> 0;<br>
      }</p>
    <p class="style4"><span class="style5">void</span> drawSprite(SDL_Surface* imageSurface, <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SDL_Surface* screenSurface,<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="style5">int</span> srcX, <span class="style5">int</span> srcY, <br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="style5">int</span> dstX, <span class="style5">int</span> dstY,<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="style5">int</span> width, <span class="style5">int</span> height)<br>
  {<br>
  &nbsp;&nbsp;&nbsp;SDL_Rect srcRect;<br>
  &nbsp;&nbsp;&nbsp;srcRect.x = srcX;<br>
  &nbsp;&nbsp;&nbsp;srcRect.y = srcY;<br>
  &nbsp;&nbsp;&nbsp;srcRect.w = width;<br>
  &nbsp;&nbsp;&nbsp;srcRect.h = height;</p>
    <p class="style4"> &nbsp;&nbsp;&nbsp;SDL_Rect dstRect;<br>
  &nbsp;&nbsp;&nbsp;dstRect.x = dstX;<br>
  &nbsp;&nbsp;&nbsp;dstRect.y = dstY;<br>
  &nbsp;&nbsp;&nbsp;dstRect.w = width;<br>
  &nbsp;&nbsp;&nbsp;dstRect.h = height;<br>
  <br>
&nbsp;&nbsp;&nbsp;SDL_BlitSurface(imageSurface, &amp;srcRect, screenSurface, &amp;dstRect);<br>
      }</p>
    <h2 class="style12">Exercises</h2>
    <p class="style12"><strong>Ex 1)</strong> Try adding a second sprite that moves when you press the WASD keys.</p>
    </div>
  </center>
</td>
				</tr>
			</tbody></table>			
		</td>
	</tr>
</tbody></table>


<table width="100%" border="0" cellpadding="0" cellspacing="0"><tbody><tr valign="top">
<td height="101" width="100%" background="sdlkeyboard_elemei/bottombg.jpg">

<center>
  This site is &#169; Copyright Aaron Cox 2004-2005, All Rights Reserved.
</center>

			<!-- do not remove --><center>
			<a href="http://www.steves-templates.com/" title="Steves website templates" target="_blank">Website templates</a></center>
			<!-- end link -->	
</td>
<td height="101" width="94"><img src="sdlkeyboard_elemei/bottomright.jpg" alt="" height="101" width="94" border="0"></td>
</tr></tbody></table>

</body></html>