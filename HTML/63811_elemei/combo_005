if(!window.ucs){window.ucs={};}if(!window.ucs.UH_MAIN_ID){window.ucs.UH_MAIN_ID="#yucs";}if(!window.ucs.ymreqid){window.ucs.ymreqid=function(){var c=new Date().getTime(),b=null,a="xxxxxxxx-xxxx-xxxx-09xx-xxxxxxxxxx00".replace(/x/g,function(d){b=(c+Math.random()*16)%16|0;c=Math.floor(c/16);return b.toString(16);});return a;};}if(!window.ucs._sendBeacon){window.ucs._sendBeacon=function(c,b){var a=new Image();a.height=0;a.width=0;a.style.display="none";a.src="https://geo.yahoo.com/t"+c;document.body.appendChild(a);};}if(!window.ucs.YObj){window.ucs.YObj=(function(){var a=document.getElementById("yucs");return(typeof window.Y!=="undefined"&&(a&&a.getAttribute("data-property")==="srp"))?window.Y:YUI();})();}YUI.add("gallery-jsonp",function(b){var a=b.Lang.isObject,c=b.Lang.isFunction;function d(){this._init.apply(this,arguments);}d._pattern=/\bcallback=(.*?)(?=&|$)/i;d._template="callback={callback}";d.prototype={_init:function(f,e){this.url=f;e=e||{};if(c(e)){e={on:{success:e}};}e.on=e.on||{};if(!e.on.success){e.on.success=this._getCallbackFromUrl(f);}this._config=b.merge({on:{},context:this,args:[],format:this._format},e);},_getCallbackFromUrl:function(i){var j=i.match(d._pattern),e,g,f,h;if(j){g=b.config.win;f=j[1].split(/\./).reverse();e=f.shift();for(h=f.length-1;h>=0;--h){g=g[f[h]];if(!a(g)){return null;}}if(a(g)&&c(g[e])){return b.bind(g[e],g);}}return null;},send:function(e){if(!this._config.on.success){return this;}var g=b.guid().replace(/-/g,"_"),h=this._config,i=h.format.call(this,this.url,"YUI.Env.JSONP."+g);function f(j){return(c(j))?function(k){delete YUI.Env.JSONP[g];j.apply(h.context,[k].concat(h.args));}:null;}YUI.Env.JSONP[g]=f(h.on.success);b.Get.script(i,{onFailure:f(h.on.failure),onTimeout:f(h.on.timeout||h.on.failure),timeout:h.timeout});return this;},_format:function(h,f){var e=d._template.replace(/\{callback\}/,f),g;if(d._pattern.test(h)){return h.replace(d._pattern,e);}else{g=h.slice(-1);if(g!=="&"&&g!=="?"){h+=(h.indexOf("?")>-1)?"&":"?";}return h+e;}}};b.JSONPRequest=d;b.jsonp=function(f,e){return new b.JSONPRequest(f,e).send();};if(!YUI.Env.JSONP){YUI.Env.JSONP={};}},"gallery-2010.08.11-20-39",{requires:["get","oop"]});YUI.add("ucs-menu-utils",function(c){c.namespace("ucs");if(c.ucs.MenuUtils){return;}var m="{separatorTop}"+'<li class="{isDisabled} {isActive} {menuClass}">'+'<a target="{target}" {actionData} href="{url}" {disabledAria}>'+"{icon}"+"{menuText}"+"</a></li>"+"{separatorBottom}",r="{separatorTop}"+'<li class="{isDisabled} {isActive} {menuClass}">'+'<a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>'+"{icon}"+"{menuText}"+"</a></li>"+"{separatorBottom}",l='<span class="separator" role="presentation"></span>',g="click",p="a",h="role",a="tabIndex",f="yucs-hide",b="iframe",j="ul",d="li",o="parentNode",q="http://l.yimg.com/a/lib/ush/icon.gif",e="https://s.yimg.com/lq/lib/ush/icon.gif",k=300,i,n;c.ucs.MenuUtils=function(t,s){var u=s&&s.panelSelector||j;this.menu=t;this.enableClick=s&&s.enableClick;this.panel=this.menu.one(u);if(this.panel){this.init();}this.openDelay=(s&&typeof s.openDelay!="undefined")?(s.openDelay):(k);this.closeTimer=null;this.overPanel=false;this.overLink=false;};c.ucs.MenuUtils.prototype={init:function(){this.keyedup=false;this.menu.on("hover",c.bind(this._handleMenuEnter,this),c.bind(this._handleMouseOut,this),this);this.panel.on("hover",c.bind(this._handlePanelEnter,this),c.bind(this._handlePanelLeave,this),this);if(this.enableClick){this.menu.on("click",c.bind(this._handleMenuToggle,this),this);}this.menu.delegate(g,this._handleMenuItemClick,"li a",this);this.menu.on("keyup",this._handleKeyup,this);this.menu.on("keydown",this._handleKeydown,this);this.menu.removeClass("yucs-activate");this._initAria();},_initAria:function(){this.menu.one(p).set(h,"button");this.panel.all(p).set(h,"menuitemradio");this.panel.set(h,"menu");this.panel.all("div,ul,li").set(h,"presentation");if(!c.UA.ipad&&!c.UA.mobile){this.panel.set(a,-1);}this.focusmanager=this.panel.plug(c.Plugin.NodeFocusManager,{descendants:p,keys:{next:"down:40",previous:"down:38"},focusClass:{className:"yucs-has-focus",fn:function(s){return s.get(o);}},circular:true});},_refreshAria:function(){this.focusmanager.focusManager.refresh();},_destructAria:function(){this.panel.unplug(c.Plugin.NodeFocusManager);this.panel.one(p).set(a,0);},_handleMenuClick:function(s){if(this.overLink&&this.panel.hasClass(f)){this._accessShowMenu(s);if(this.closeTimer){this.closeTimer.cancel();this.closeTimer=null;}}},_handleMenuEnter:function(s){s.halt();this.overLink=true;c.later(this.openDelay,this,this._handleMenuClick);},_handlePanelEnter:function(s){if(this.closeTimer){this.closeTimer.cancel();this.closeTimer=null;}this.overPanel=true;},_handlePanelLeave:function(s){this.overPanel=false;if(this.panelShown){this._handleMouseOut();}},_handleMenuToggle:function(s){if(this.overLink){this.overLink=false;}else{this.overLink=true;}if(this.panelShown){if(this.closeTimer){this.closeTimer.cancel();this.closeTimer=null;}if(!this.panel.hasClass(f)){this.closeTimer=c.later(500,this,this._handleLeave);}}else{c.later(this.openDelay,this,this._handleMenuClick);}},_handleKeyup:function(s){if(27===s.keyCode){this.menu.one(p).focus();this._hideMenu();}else{if(40===s.keyCode&&!this.keyedup){this.panel.one(p).focus();this.keyedup=true;}}},_handleKeydown:function(s){if(!this.panel.hasClass(f)){s.stopPropagation();}if(40===s.keyCode){s.preventDefault();}},_handleDocumentClick:function(s){if(this.panel.contains(s.target)||s.target._node===this.panel._node||this.panel.hasClass(f)||s.target===this.menu.one(">a")||s.target.get("parentNode")===this.menu.one(">a")){this.skipBlur=true;return;}this._hideMenu();},_accessShowMenu:function(t){var s=this;this._hideAllMenus();this._showMenu(t);this.panel.focus();c.Node.DOM_EVENTS.touchend=true;this.documentBlurHandle=c.on("blur",function(v){var u=this;if(!this.skipBlur){this.timeout=setTimeout(function(){u._hideMenu();},50);}this.skipBlur=false;},this.panel,this);this.documentFocusHandle=c.on("focus",function(u){if(this.timeout&&this.panel.hasChildNodes(u.target)){clearTimeout(this.timeout);this.timeout=null;}},this.panel,this);},_showMenu:function(t){this.panel.removeClass(f);this._addIframeShim();var s=this.menu.one(b);if(s){s.removeClass(f);}},_position:function(){var s=this.menu.get("region");if(!this.panel.hasClass("yucs-menu-right")&&!this.panel.hasClass("yucs-menu-left")){this.panel.setStyle("left",s[0]);}this.panel.setStyle("top",s[1]+13);},_handleMouseOut:function(s){this.overLink=false;if(this.closeTimer){this.closeTimer.cancel();this.closeTimer=null;}if(!this.panel.hasClass(f)){this.closeTimer=c.later(500,this,this._handleLeave);}},_handleLeave:function(s){if(!this.overPanel&&!this.overLink){this._hideMenu();}},_hideMenu:function(){this.panel.addClass(f);this.overPanel=false;var s=this.menu.one(b);if(s){s.addClass(f);}if(this.documentBlurHandle){this.documentBlurHandle.detach();}if(this.documentFocusHandle){this.documentFocusHandle.detach();}if(this.documentClickHandle){this.documentClickHandle.detach();}if(this.documentMouseDownHandle){this.documentMouseDownHandle.detach();}if(this.documentTouchEndHandle){this.documentTouchEndHandle.detach();}this.keyedup=false;},_hideAllMenus:function(){var t=c.all("yucs-menu iframe"),s=c.one("#yucs-top-menu");this._hideMenu();if(s&&s.one("ul")){s.one("ul").addClass(f);c.one("#yucs-more").removeClass("yucs-menu-active");}t.addClass(f);},_addIframeShim:function(){var s=c.all("select"),u=(c.UA.ie<=6),t;if(!u||(s.size()===0)){return;}t=this.menu.one(b);if(!t){t=document.createElement(b);t=this.panel.get(o).insertBefore(t,this.panel);}t.className="yucs-shim";t.setStyle("position","absolute");t.setStyle("width",this.panel.getComputedStyle("width"));t.setStyle("height",this.panel.getComputedStyle("height"));t.setStyle("top",this.panel.getY()+"px");t.setStyle("border","0px none");if(!this.menu.hasClass("yucs-help")){t.setStyle("left",0);}t.frameBorder=0;},_addMenuGroups:function(v,A,z){var x=this.menu.one(j),s="",t=(x.get("children")._nodes.length)?true:false;for(var u=0,w=v.length;u<w;u++){var y=v[u].length;if(A==="bottom"){v[u][0].separatorTop=true;}else{if(u<(w-1)||t){v[u][y-1].separatorBottom=true;
}}s+=this._addMenuGroup(v[u],z);}if(A==="bottom"){x.append(s);}else{x.prepend(s);}},_addMenuGroup:function(t,v){var w="";for(var u=0,s=t.length;u<s;u++){if(v){t[u].isDebugItem=true;t[u].menuClass="debug-item";}else{t[u].isDebugItem=false;t[u].menuClass="minty-item";}w+=this._addMenuItem(t[u]);}return w;},_addMenuItem:function(t){var s="";if(t.isActive){t.checkedAria='aria-checked="true"';}else{t.checkedAria="";}if(t.isDisabled){t.disabledAria='aria-disabled="true"';}else{t.disabledAria="";}switch(t.actionType){case"link":s=c.substitute(m,t,this._processTemplateValue);break;case"customEvent":s=c.substitute(r,t,this._processTemplateValue);break;default:break;}if(s){if(t.isDebugItem){s=s.replace(/separator/,"separator debug-item");}else{s=s.replace(/separator/,"separator minty-item");}}return s;},_clearMenuItem:function(s){this.menu.one(j).all("."+s).each(function(t){t.remove(true);});},_processTemplateValue:function(t,u,v){c.log("key = "+t+" value = "+u+" meta_data = "+v);var w="";var s=(document.location.protocol==="https:")?e:q;switch(t){case"icon":if(u!==undefined){if(u==="available"){w='<img src="'+s+'" class="yucs-opi available"/>';}else{if(u==="offline"){w='<img src="'+s+'" class="yucs-opi offline"/>';}else{if(u==="invisible"){w='<img src="'+s+'" class="yucs-opi invisible"/>';}else{if(u==="busy"){w='<img src="'+s+'" class="yucs-opi busy"/>';}else{if(u==="idle"){w='<img src="'+s+'" class="yucs-opi idle"/>';}else{w='<img src="'+u+'" />';}}}}}}break;case"separatorTop":if(u){w=l;}break;case"separatorBottom":if(u){w=l;}break;case"actionData":if(u){w='data-mad="'+u+'"';}break;case"isDisabled":if(u){w="disabled";}break;case"isActive":if(u){w="sp active";}break;case"checkedAria":w=u;break;default:w=u;break;}return w;},_resetItemStatus:function(v){var u=v.ancestor(j).all(d),t=v.ancestor(j).all("li.disabled"),s;u.removeClass("sp active");t.removeClass("disabled");if(v.getAttribute("data-dis")){s=v.ancestor(d);s.addClass("disabled");}if(v.getAttribute("data-hs")){s=v.ancestor(d);s.addClass("sp active");}},_handleMenuItemClick:function(u){var s=u.target;}};},"1.0",{requires:["node","event","event-hover","event-custom","substitute","node-focusmanager"]});(function(){var a=document.getElementById("yucs");if(!a){return;}ucs.YObj.use("node","ucs-menu-utils",function(c){var b=c.one("#yucs").all("li.yucs-menu.yucs-activate");b.each(function(e){var d=new c.ucs.MenuUtils(e);});});})();(function(){var i="%Y",g="%y",e="%m",h="%d",k=["en-ae","en-au","en-ca","en-ie","en-in","en-my","en-nz","en-ph","en-sg","en-us","es-us","ja-jp","sv-se"],f=["zh-hant-cn","zh-hant-tw"],j=document.getElementById("yucs").getAttribute("data-lang").toLowerCase(),a=j.split("-")[0],b,d,c;switch(a){case"tr":b=[{"locale":null,"separator":[" "]}];break;default:b=[{"separator":["-"],"locale":["es-cl","nl-nl","ta-in","zh-hant-cn"]},{"separator":["."],"locale":["de-at","de-ch","de-de","fi-fi","nb-no","pl-pl","ro-ro","ru-ru"]},{"separator":["/"],"locale":null}];}(function(){var n;if(!Array.prototype.indexOf){Array.prototype.indexOf=function(q,r){for(var p=(r||0),o=this.length;p<o;p++){if(this[p]===q){return p;}}return -1;};}for(var m=0,l=b.length;m<l;m++){n=b[m]["locale"];if(!n){d=b[m]["separator"];}else{if(n.indexOf(j)>=0){d=b[m]["separator"];break;}}}if(!d){d=["/"];}})();(function(){var l=d[0];if(f.indexOf(j)>=0){c=[i,l,e,l,h].join("");}else{if(k.indexOf(j)>=0){c=[e,l,h,l,g].join("");}else{c=[h,l,e,l,i].join("");}}})();window.ucs["localeDateFormat"]=c;})();ucs.YObj.use("datatype-date",function(a){});YUI.add("ucs-timestamp-library",function(a){a.namespace("ucs.Timestamp");a.ucs.Timestamp={getTimeStamp:function(e){var n,r,u,s,w,o,g="AM",j,b=a.one("#yucs"),l=e.dateRef||new Date(),m=e.date,q=e.locale?e.locale:b.getAttribute("data-lang"),i=m.getTime(),v=m.getDate(),k=l.getDate(),x=l.getTime(),h=x-i,p=k-v,f=true,c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];f=/^en-us$/i.test(q);h=parseInt(h/1000,10);r=m.getMonth();w=m.getHours();o=m.getMinutes();j=x-((l.getHours()*60*60*1000)+(l.getMinutes()*60*1000)+(l.getSeconds()*1000)+l.getMilliseconds());if(o<10){o="0"+o;}if(w>=12){g="PM";}if(w>12){w-=12;}if(e.type&&e.type==="short"&&a.DataType&&a.DataType.Date){if(p===0){n=w+":"+o+" "+g;}else{if(/^th-th$/i.test(q)){m.setFullYear(m.getFullYear()+543);}n=a.DataType.Date.format(m,{format:window.ucs.localeDateFormat}).replace(/\b0(?=\d)/g,"");}}else{if(!f){n=c[r]+" "+v+"&nbsp;&nbsp;"+w+":"+o+" "+g;}else{if(p===0){if(h<60){if(h>1){n=h+" secs ago";}else{n=h+" sec ago";}}else{if(h<3600){h=Math.ceil(h/60,10);if(h<2){n=h+" min ago";}else{n=h+" mins ago";}}else{if(h<86400){h=Math.ceil(h/3600);if(h>1){n=h+" hours ago";}else{n=h+" hour ago";}}}}}else{if(((j-i)<86400000)&&p!==0){n="Yesterday "+w+":"+o+" "+g;}else{n=c[r]+" "+v+"&nbsp;&nbsp;"+w+":"+o+" "+g;}}}}return n;}};},"1.0",{requires:["node","datatype-date"]});YUI.add("ucs-logodebug",function(d){d.namespace("ucs");var a=document.getElementById("imageCheck"),c=document.getElementById("yucs-logo-ani"),b=false;if(navigator.userAgent.toLowerCase().indexOf("msie")!=-1){b=true;}if((a&&a.offsetWidth===0)||(a&&a.offsetWidth===0)||(b&&a&&a.readyState=="uninitialized")||(b&&a&&a.readyState==undefined)){c.style.visibility="visible";c.style.position="relative";}d.ucs.LogoDebug=function(e){e.on("click",this._handleClick,this);this.publish("ucs:logoDebug",{broadcast:2,emitFacade:true});};d.ucs.LogoDebug.prototype={_handleClick:function(f){if(f.altKey){f.halt();this.fire("ucs:logoDebug");}}};d.Global.on("ucs:themeChange",function(f){d.later(11,this,function(g){if(d.one("#animator")){d.one("#animator").setStyle("display","none");}if(d.one("#yucs-logo-ani")){d.one("#yucs-logo-ani").setStyle("clip","auto");d.one("#yucs-logo-ani").setStyle("visibility","visible");if(d.one(".lt #yucs-logo-ani")){d.one(".lt #yucs-logo-ani").setStyle("backgroundPosition","-350px 0 !important");}else{d.one("#yucs-logo-ani").setStyle("backgroundPosition","0% 0%");}}});});d.Global.on("ucs:playLogo",function(f){if(typeof Aniden!="undefined"&&Aniden.play){Aniden.play();}});d.augment(d.ucs.LogoDebug,d.EventTarget);},"1.0",{requires:["node"]});(function(){ucs.YObj.use("node","ucs-logodebug",function(c){var b=c.one("#yucs-logo");if(b){var a=new c.ucs.LogoDebug(b);}});})();YUI.add("ucs-switch-theme",function(a){a.namespace("ucs");a.ucs.SwitchTheme=function(b){this.init(b);};a.ucs.SwitchTheme.prototype={init:function(b){this.container=b;},_getTheme:function(){if(this.container.hasClass("lt")){return"light";}return"dark";},_setTheme:function(b){if("light"==b){this.container.addClass("lt");}else{if("dark"==b){this.container.removeClass("lt");}}}};});ucs.YObj.use("node","ucs-switch-theme",function(b){if(!ucs.UhTheme){var a=b.one("#yucs");ucs.UhTheme=new b.ucs.SwitchTheme(a);ucs.UhTheme.getTheme=function(){return ucs.UhTheme._getTheme();};ucs.UhTheme.setTheme=function(c){return ucs.UhTheme._setTheme(c);};}});if(window.ucs&&window.ucs.YObj){(function(a){YUI.add("ucs-meta",function(g){g.namespace("ucs");if(g.ucs.Meta){g.log("Y.ucs.Meta is already defined.","debug","ucs-meta");return;}var c=null,f=null,d=null,e={},b=function(h){if(g.version>="3.5.1"){return h.getData();}else{return{authstate:h.getAttribute("data-authState"),cobrand:h.getAttribute("data-cobrand"),crumb:h.getAttribute("data-crumb"),gta:h.getAttribute("data-gta"),device:h.getAttribute("data-device"),experience:h.getAttribute("data-experience"),firstname:h.getAttribute("data-firstname"),flight:h.getAttribute("data-flight"),forcecobrand:h.getAttribute("data-forcecobrand"),guid:h.getAttribute("data-guid"),host:h.getAttribute("data-host"),https:h.getAttribute("data-https"),languagetag:h.getAttribute("data-languagetag"),property:h.getAttribute("data-property"),protocol:h.getAttribute("data-protocol"),shortfirstname:h.getAttribute("data-shortfirstname"),shortuserid:h.getAttribute("data-shortuserid"),status:h.getAttribute("data-status"),spaceid:h.getAttribute("data-spaceid"),test_id:h.getAttribute("data-test_id"),userid:h.getAttribute("data-userid")};}};g.ucs.Meta=function(h){c=this;c.components={meta:h};c.data=b(h);};g.ucs.Meta.prototype={authState:function(){return g.Object.getValue(c.data,"authstate");},cobrand:function(){return g.Object.getValue(c.data,"cobrand");},crumb:function(){return g.Object.getValue(c.data,"crumb");},gta:function(){return g.Object.getValue(c.data,"gta");},device:function(){return g.Object.getValue(c.data,"device");},experience:function(){return g.Object.getValue(c.data,"experience");},find:function(h){return g.one(g.Lang.sub("#yucs-{component}",{component:h}));},firstname:function(){return g.Object.getValue(c.data,"firstname");},flight:function(){return g.Object.getValue(c.data,"flight");},forcecobrand:function(){return g.Object.getValue(c.data,"forcecobrand");},guid:function(){return g.Object.getValue(c.data,"guid");},host:function(){return g.Object.getValue(c.data,"host");},https:function(){return g.Object.getValue(c.data,"https");},languagetag:function(){return g.Object.getValue(c.data,"languagetag");},property:function(){return g.Object.getValue(c.data,"property");},protocol:function(){return g.Object.getValue(c.data,"protocol");},shortfirstname:function(){return g.Object.getValue(c.data,"shortfirstname");},shortuserid:function(){return g.Object.getValue(c.data,"shortuserid");},status:function(){return g.Object.getValue(c.data,"status");},spaceid:function(){return g.Object.getValue(c.data,"spaceid");},test_id:function(){return g.Object.getValue(c.data,"test_id");},userid:function(){return g.Object.getValue(c.data,"userid");},toJSON:function(){return{authState:c.authState(),cobrand:c.cobrand(),crumb:c.crumb(),gta:c.gta(),device:c.device(),experience:c.experience(),firstname:c.firstname(),flight:c.flight(),forcecobrand:c.forcecobrand(),guid:c.guid(),host:c.host(),https:c.https(),languagetag:c.languagetag(),property:c.property(),protocol:c.protocol(),shortfirstname:c.shortfirstname(),shortuserid:c.shortuserid(),status:c.status(),spaceid:c.spaceid(),test_id:c.test_id(),userid:c.userid()};}};},"0.0.1",{requires:["node"]});a.YObj.use("ucs-meta",function(b){if(!b.Lang.isObject(a.Meta)||!(a.Meta instanceof b.ucs.Meta)){a.Meta=new b.ucs.Meta(b.one("#yucs-meta"));}});}(window.ucs));}YUI.add("ucs-beacon",function(d){var a=null,c=function(h){var e=null,j={},k="",f="",g=null;e=b();if(e!==null){d.log("emit_beacon: beacon=YMedia.Af.Beacon","debug","Beacon");d.log(h,"debug");switch(h.type){case"info":e.info(h.source,{code:h.code,message:d.JSON.stringify(h)});break;case"error":e.error(h.source,{},{code:h.code,message:d.JSON.stringify(h)});break;}}else{d.log("emit_beacon: beacon=geo.yahoo.com","debug","Beacon");d.log(h,"debug");j.s=1197747123;j.r=encodeURIComponent(location.href);j.t=Math.random();j.dmsgs=encodeURIComponent(d.JSON.stringify(h.dmsgs));j.sec=encodeURIComponent(h.sec);j.slk=encodeURIComponent(h.slk);j.type=h.type;for(g in j){k+=f+g+"="+j[g];f="&";}e=new Image(0,0);e.src="https://geo.yahoo.com/p?"+k;}},b=function(){var e=null;if(typeof YMedia!=="undefined"&&d.Lang.isObject(YMedia)&&d.Lang.isObject(YMedia.Af)&&d.Lang.isObject(YMedia.Af.Beacon)){e=YMedia.Af.Beacon;if(d.Lang.isFunction(e.setSampleSize)){if(window.location.href.match(/debug_beacon=1/)){e.setSampleSize(1);}}else{d.log("get_beacon: setSampleSize method not found!");}}return e;};d.namespace("ucs").Beacon={error:function(e){c(e);},info:function(e){c(e);},perf:function(e){c(e);}};},"1.0",{requires:["json"]});YUI.add("comet",function(d){d.namespace("Comet");function b(e){b.superclass.constructor.apply(this,arguments);}var c={};var a="comet:ready";d.initComet=function(g,f){var e=g.replace(/https:/,"http:");if(e.substr(-1)==="/"){e=e.substring(0,e.length-1);}if(!c[e]){d.publish(a);c[e]=new b();c[e].clearListeners();}else{}if(f){c[e].addListener("/meta/handshake",f);}c[e].initBayeux(g,function(h){if(h.successful){d.fire(a,{message:h});}});return c[e];};b.NAME="Comet";b.ATTRS={uri:{value:null,setter:function(g){if(g===null){return;}var e=window.location.protocol;if(e.indexOf("https")!==-1){g=g.replace(/http:/,"https:");}else{if(e.indexOf("http")!==-1){g=g.replace(/https:/,"http:");}}var f=g.toLowerCase();if(f.indexOf("https://")!==-1){this.set("protocol","https://");}else{if(f.indexOf("http://")!==-1){this.set("protocol","http://");}}return g;}},protocol:{value:"https://"},meta:{value:{handshake:{channel:"/meta/handshake",version:"1.0",supportedConnectionTypes:["long-polling"]},connect:{channel:"/meta/connect",connectionType:"long-polling"},subscribe:{channel:"/meta/subscribe"},unsubscribe:{channel:"/meta/unsubscribe"},publish:{},disconnect:{channel:"/meta/disconnect"}}},ioCfg:{value:{method:"POST",headers:{"Content-Type":"application/json","Accept":"*/*"}}},ext:{value:{all:{},handshake:{},subscribe:{"Comet-api-version":"1.1","Comet-subscriber-auth-info":null},unsubscribe:{"Comet-api-version":"1.1","Comet-subscriber-auth-info":null},connect:{},publish:{"Comet-api-version":"1.1","Comet-registration-id":"make-up","Comet-opaque-id":"markup","Comet-acknowledge-URI":"www.yahoo.com/ack","Comet-acknowledge-type":"All"},disconnect:{}}}};d.extend(b,d.Base,{_clientState:"unconnected",_advice:{},_connected:false,_config:{backoffIncrement:1000,maxBackoff:10000,maxNetworkDelay:300000,delayedSendMaxCount:10,advice:{timeout:60000,interval:0,reconnect:"retry"},subscribe:{jsonpTimeout:5000}},_delayedSendCount:0,_urlOrigin:"",_backoff:0,_isLongpollingConnect:false,_isSendingQueue:false,_clientId:null,_token:null,_lastMessageId:0,_outgoing:[],_subscribeChannel:{},_queue:new d.AsyncQueue(),_ioQueue_c2s:d.io.queue,_ioQueue_s2c:d.io.queue,_jsonp:null,_listeners:{},initializer:function(e){this.setClientState("unconnected");d.on("beforeunload",d.bind(function(){if(this.getClientState()!=="unconnected"){this.disconnect();}},this),window);},config:function(e,f){d.Object.setValue(this._config,e,f);},_Queue_send:function(f){var e=this;e._batch(f);if(!e.getClientId()){return;}if(e._isSendingQueue){return;}if(e._outgoing.length<=0){return;}d.each(e._outgoing,function(g){g=e._patchMessage(g);});e._IO_send(true,e._outgoing);e._outgoing=[];},_nextQueueSend:function(){this._Queue_send();},_IO_send:function(g,f){var e=this;if(!e.get("uri")){return;}if(g){if(e._isSendingQueue||!f){return;}e._IO_Queue_Send(f);}else{if(!e.getClientId()){return;}if(e._isLongpollingConnect||!f){return;}e._IO_Longpolling_Send(f);}},_IO_Queue_Send:function(f){var e=this;e.setTokenHeader(e._token);var g=d.merge(e.get("ioCfg"),{context:e,timeout:e._config.maxNetworkDelay,data:d.JSON.stringify(f),xdr:{credentials:true},on:{success:function(h,k){try{var i=d.JSON.parse(k.responseText);e._handleResponse(i);}catch(j){e._handleFailure(f,"json parse error");return;}},failure:function(h,i){e._handleFailure(f,"500::io failed");},start:function(){e._isSendingQueue=true;},complete:function(){e._isSendingQueue=false;e._nextQueueSend();}}});e._ioQueue_c2s.stop();e._ioQueue_c2s(e.get("uri"),g);e._ioQueue_c2s.start();},_IO_Jsonp_Send:function(f){var e=this;if(!e.get("uri")){return;}var h=e.get("uri")+"?callback={callback}";var g=encodeURIComponent(d.JSON.stringify(f));h=h+"&data="+g;e._jsonp=new d.JSONPRequest(h,{on:{success:function(i){e._handleResponse(i);},timeout:function(i){e._handleFailure(f,"408:"+e._config.subscribe.jsonpTimeout+":jsonp timeout");},failure:function(){e._handleFailure(f,"500::jsonp failed");}},timeout:e._config.subscribe.jsonpTimeout});e._jsonp.send();},_IO_Longpolling_Send:function(f){var e=this;e.setTokenHeader(e._token);var g=d.merge(e.get("ioCfg"),{context:e,timeout:e._config.maxNetworkDelay,xdr:{credentials:true},data:d.JSON.stringify(f),on:{success:function(h,k){try{var i=d.JSON.parse(k.responseText);e._handleResponse(i);}catch(j){e._handleFailure(f,"json parse error");return;}},failure:function(h,i){e._handleFailure(f,"500::io failed");},start:function(){e._isLongpollingConnect=true;},complete:function(){e._isLongpollingConnect=false;}}});e._ioQueue_s2c.stop();e._ioQueue_s2c(e.get("uri"),g);e._ioQueue_s2c.start();},_handleResponse:function(e){if(e===undefined||e===null){return;}var f=this;d.each(e,function(h){f._updateAdvice(h.advice);h.originalURI=f._urlOrigin;var g=h.channel;switch(g){case"/meta/handshake":f._handshakeResponse(h);break;case"/meta/connect":f._connectResponse(h);break;case"/meta/disconnect":f._disconnectResponse(h);break;case"/meta/subscribe":f._subscribeResponse(h);break;case"/meta/unsubscribe":f._unsubscribeResponse(h);break;default:f._messageResponse(h);break;}});},_updateAdvice:function(e){if(e){this._advice=this._mixin(false,{},this._config.advice,e);}else{this._advice=this._config.advice;}},_handshakeResponse:function(f){var e=this;if(f.successful){e.setClientState("connected");e._clientId=f.clientId;if(e._advice.VIP){e.set("uri",e.get("protocol")+e._advice.VIP+"/comet");}e._notifyListeners("/meta/handshake",f);e._Queue_send();var g=e._isDisconnected()?"none":e._advice.reconnect;switch(g){case"retry":e._resetBackoff();e._delayedConnect();break;case"handshake":e.setClientState("unconnected");e._resetBackoff();e._delayedHandshake();break;case"none":e._disconnect(false);break;}}else{e._failHandshake(f);}},_failHandshake:function(g){var f=this;f.setClientState("unconnected");f._clientId=null;f._notifyListeners("/meta/handshake",g);f._notifyListeners("/meta/unsuccessful",g);var e=(f._advice.reconnect!=="none");if(e){f._increaseBackoff();f._delayedHandshake();}else{f._disconnect(false);}},_delayedHandshake:function(){var e=this;
this._delayedSend(function(){e._handshake();});},_subscribeResponse:function(e){if(e.successful){if(this._subscribeChannel[e.subscription]&&this._subscribeChannel[e.subscription]===true){}else{this._subscribeChannel[e.subscription]=true;}if(e["ext"]["Comet-auth-token"]){this._token=e["ext"]["Comet-auth-token"];}this._notifyListeners("/meta/subscribe",e);}else{this._failSubscribe(e);}},_failSubscribe:function(e){this._notifyListeners("/meta/subscribe",e);this._notifyListeners("/meta/unsuccessful",e);},_connectResponse:function(f){var e=this;if(e._isDisconnected()){return;}e._connected=f.successful;if(e._connected){e.setClientState("connected");e._notifyListeners("/meta/connect",f);var g=e._isDisconnected()?"none":e._advice.reconnect;switch(g){case"retry":e._resetBackoff();e._delayedConnect();break;case"handshake":e.setClientState("unconnected");e._resetBackoff();e._delayedHandshake();break;case"none":e._disconnect(false);break;}}else{e._failConnect(f);}},_failConnect:function(f){var e=this;e._notifyListeners("/meta/connect",f);e._notifyListeners("/meta/unsuccessful",f);var g=e._isDisconnected()?"none":e._advice.reconnect;switch(g){case"retry":e._delayedConnect();e._increaseBackoff();break;case"subscribe":e._delayedConnect();e._increaseBackoff();break;case"handshake":e.setClientState("unconnected");e._resetBackoff();e._delayedHandshake();break;case"none":e._disconnect(false);break;}},_delayedConnect:function(){var e=this;this._delayedSend(function(){e._connect();});},_disconnectResponse:function(e){if(e.successful){this._disconnect(false);this._notifyListeners("/meta/disconnect",e);}else{this._failDisconnect(e);}},_failDisconnect:function(e){this._disconnect(true);this._notifyListeners("/meta/disconnect",e);this._notifyListeners("/meta/unsuccessful",e);},_unsubscribeResponse:function(e){if(e.successful){if(this._subscribeChannel[e.subscription]&&this._subscribeChannel[e.subscription]===true){delete this._subscribeChannel[e.subscription];}this._notifyListeners("/meta/unsubscribe",e);}else{this._failUnsubscribe(e);}},_failUnsubscribe:function(e){this._notifyListeners("/meta/unsubscribe",e);this._notifyListeners("/meta/unsuccessful",e);},_messageResponse:function(e){if(e.successful===undefined){if(e.data){this._notifyListeners(e.channel,e);}else{this._notifyListeners("/meta/unsuccessful",e);}}else{if(e.successful){this._notifyListeners("/meta/publish",e);}else{this._failMessage(e);}}},_failMessage:function(e){this._notifyListeners("/meta/publish",e);this._notifyListeners("/meta/unsuccessful",e);},_delayedSend:function(e){var h=this;var f=h._advice.interval+h._backoff;if(h._config.maxBackoff<=h._backoff){h._delayedSendCount++;}else{h._delayedSendCount=0;}if(h._delayedSendCount>h._config.delayedSendMaxCount){var g=h.get("uri");h.set("uri",h._urlOrigin);if(g===h.get("uri")){return;}h._resetBackoff();h._delayedSendCount=0;}h._queue.add({fn:e,timeout:f});h._queue.run();},_handshakeFailure:function(f,e){this._failHandshake({successful:false,failure:true,channel:"/meta/handshake",request:f,advice:{reconnect:"retry",interval:this._backoff},error:e||"",ext:f.ext||{},id:f.id||""});},_connectFailure:function(f,e){this._connected=false;this._failConnect({successful:false,failure:true,channel:"/meta/connect",request:f,advice:{reconnect:"retry",interval:this._backoff},clientId:f.clientId||"",error:e||"",ext:f.ext||{},id:f.id||""});},_disconnectFailure:function(f,e){this._failDisconnect({successful:false,failure:true,channel:"/meta/disconnect",request:f,advice:{reconnect:"none",interval:0},clientId:f.clientId||"",error:e||"",ext:f.ext||{},id:f.id||""});},_subscribeFailure:function(f,e){this._failSubscribe({successful:false,failure:true,channel:"/meta/subscribe",request:f,advice:{reconnect:"none",interval:0},clientId:f.clientId||"",subscription:f.subscription||"",error:e||"",ext:f.ext||{},id:f.id||""});},_unsubscribeFailure:function(f,e){this._failUnsubscribe({successful:false,failure:true,channel:"/meta/unsubscribe",request:f,advice:{reconnect:"none",interval:0},clientId:f.clientId||"",subscription:f.subscription||"",error:e||"",ext:f.ext||{},id:f.id||""});},_messageFailure:function(f,e){this._failMessage({successful:false,failure:true,channel:f.channel,request:f,advice:{reconnect:"none",interval:0},clientId:f.clientId||"",subscription:f.subscription||"",error:e||"",ext:f.ext||{},id:f.id||""});},_handleFailure:function(j,e){var h,g,f;for(f=0;f<j.length;++f){h=j[f];g=h.channel;switch(g){case"/meta/handshake":this._handshakeFailure(h,e);break;case"/meta/connect":this._connectFailure(h,e);break;case"/meta/disconnect":this._disconnectFailure(h,e);break;case"/meta/subscribe":this._subscribeFailure(h,e);break;case"/meta/unsubscribe":this._unsubscribeFailure(h,e);break;default:this._messageFailure(h,e);break;}}},_notifyListeners:function(j,h){this._notify(j,h);this._notify(j+"/*",h);var k=j.split("/");var g=k.length-1,f=0;for(f=g;f>0;--f){var e=k.slice(0,f).join("/")+"/*";if(f===g){this._notify(e,h);}this._notify(e,h);}},_notify:function(g,f){var e=this._listeners[g];if(e){d.each(e,function(h){if(d.Lang.isFunction(h.listener)){h.listener(f);}});}},_isDisconnected:function(){return this._clientState==="unconnected";},_resetBackoff:function(){this._backoff=0;},_nextMessageId:function(){return ++this._lastMessageId+"";},_increaseBackoff:function(){if(this._backoff<this._config.maxBackoff){this._backoff+=this._config.backoffIncrement;}},_createMessage:function(g,f){f=f||{};var j=(new Date()).valueOf();var i=window.location.host;var e=[];var h=d.merge(this.get("ext").all,this.get("ext")[g],f.ext||{},{"timestamp":j,"host":i||""});switch(g){case"handshake":e.push(d.merge({id:this._nextMessageId(),ext:h},this.get("meta")[g]));break;case"connect":e.push(d.merge({id:this._nextMessageId(),ext:h},this.get("meta")[g],{clientId:this.getClientId()}));break;case"subscribe":e.push(d.merge({id:this._nextMessageId(),ext:h},this.get("meta")[g],{clientId:this.getClientId(),subscription:f.channel}));break;case"unsubscribe":e.push(d.merge({id:this._nextMessageId(),ext:h},this.get("meta")[g],{clientId:this.getClientId(),subscription:f.channel}));
break;case"publish":e.push(d.merge({id:this._nextMessageId(),ext:h},this.get("meta")[g],{clientId:this.getClientId(),channel:f.channel,data:f.data}));break;case"disconnect":e.push(d.merge({id:this._nextMessageId(),ext:h},this.get("meta")[g],{clientId:this.getClientId()}));break;}return e;},_handshake:function(e){var h=this;if(h.getClientState()!=="unconnected"){if(h.getClientState()==="connected"){var g={successful:true,channel:"/meta/handshake",clientId:h._clientId,originalURI:h._urlOrigin};h._notifyListeners("/meta/handshake",g);}return;}if(e&&e.listener){h._addListener(e,false);}h._clientId=null;h._token=null;h.resetTokenHeader();h._clearSubscriptions();h._updateAdvice(h._config.advice);var f=h._createMessage("handshake",e);h._IO_send(true,f);h.setClientState("connecting");},_connect:function(e){var g=this;if(g.getClientState()!=="connected"){return;}if(g._isLongpollingConnect){return;}var f=g._createMessage("connect",e);g._IO_send(false,f);},_subscribeJSONP:function(e){if(!(e&&e.channel)){return;}if(!this.getClientId()){return;}if(this._subscribeChannel[e.channel]&&this._subscribeChannel[e.channel]===true){return;}if(e.listener){this._addListener(e,true);}var f=this._createMessage("subscribe",e);this._IO_Jsonp_Send(f);},_unsubscribe:function(e){if(!this.getClientId()){return;}if(e&&e.channel){this.removeListeners(e.channel);}if(e&&e.channel){var f=this._createMessage("unsubscribe",e);this._Queue_send(f);}},_disconnect:function(f){var g=this;if(f){g._ioQueue_c2s.stop();g._ioQueue_s2c.stop();}g.setClientState("unconnected");g._clientId=null;g._resetBackoff();g._queue.stop();if(g._outgoing.length>0){var e=g._outgoing;g._outgoing=[];g._handleFailure(e,"500::canceled after disconnect");}g._clearSubscriptions();},_patchMessage:function(e){if(!e.id){e.id=this._nextMessageId();}e.clientId=this.getClientId();if(e.channel==="/meta/handshake"){delete e.clientId;}return e;},_batch:function(){d.each(arguments,function(e){if(e&&d.Lang.isArray(e)){var f=0;for(f=0;f<e.length;++f){this._outgoing.push(e[f]);}}else{if(e){this._outgoing.push(e);}}},this);},_clearSubscriptions:function(){d.each(this._listeners,function(e){if(e){d.each(e,function(g,f,h){if(g&&g.isSub){h.splice(f);}});}});this._subscribeChannel={};},_reDoSubscriptions:function(){d.each(this._subscribeChannel,function(e,f){if(e){this._subscribeChannel[f]=false;this._subscribeJSONP({channel:f});}},this);},isDuplicatedListener:function(e,g){var f=0;for(f=0;f<g.length;++f){var h=g[f];if(h&&h.listener&&h.listener.toString()===e.toString()){return true;}}return false;},_addListener:function(e,f,g){if(e&&e.listener&&d.Lang.isFunction(e.listener)){if(this._listeners[e.channel]){if(g||!this.isDuplicatedListener(e.listener,this._listeners[e.channel])){this._listeners[e.channel].push({listener:e.listener,isSub:f});}}else{this._listeners[e.channel]=[{listener:e.listener,isSub:f}];}}},_mixin:function(l,j,m){var g,h;var n=j||{};for(g=2;g<arguments.length;++g){var f=arguments[g];if(f===undefined||f===null){continue;}for(h in f){var e=f[h];var k=n[h];if(e===j){continue;}if(e===undefined){continue;}if(l&&typeof e==="object"&&e!==null){if(e instanceof Array){n[h]=this._mixin(l,k instanceof Array?k:[],e);}else{n[h]=this._mixin(l,{},e);}}else{n[h]=e;}}}return n;},destructor:function(){},getClientState:function(){return this._clientState;},setClientState:function(e){this._clientState=e;},getClientId:function(){return this._clientId;},initBayeux:function(e,f){this._urlOrigin=e;this.set("uri",e);this._handshake({channel:"/meta/handshake",listener:f});},subscribe:function(e,f){this._subscribeJSONP({channel:e,listener:f});},unsubscribe:function(e){this._unsubscribe({channel:e});},disconnect:function(g){var f=this;if(g){f._addListener({channel:"/meta/disconnect",listener:g},false);}if(f.getClientState()==="unconnected"){return;}if(!f.getClientId()){return;}var e=f._createMessage("disconnect");f._Queue_send(e);},publishMsg:function(f,h){if(f&&h){var e={channel:f,data:h};var g=this._createMessage("publish",e);this._Queue_send(g);}},clearListeners:function(){this._listeners={};},addListener:function(e,g,f){f=f||false;if(!g&&d.Lang.isFunction(g)){return;}this._addListener({channel:e,listener:g},false,f);},removeListeners:function(e){if(this._listeners[e]){delete this._listeners[e];}},setUserInfo:function(f,e){if(f&&e){var g=this.get("ext");g.subscribe["Comet-subscriber-auth-info"]={"uid":f,"user_type":"yahoo","user_cred":e};}},setUserInfoWithCookie:function(f,e){if(f){var g=this.get("ext");g.subscribe["Comet-subscriber-auth-info"]={"uid":f,"user_type":"yahoo","user_cred":"Any Value"};}},setTokenHeader:function(e){if(e){var f=this.get("ioCfg");f["headers"]["Authorization"]="Basic token="+e;}},resetTokenHeader:function(){var e=this.get("ioCfg");e["headers"]["Authorization"]="Basic token=";},setYcaHeader:function(e,f){if(e){var h=this.get("ioCfg");h["headers"]["Yahoo-App-Auth"]=e;}if(f){var g=this.get("ext");g.publish["Comet-opaque-id"]=f;}}});d.Comet=b;},"3.4.1",{requires:["base","io","json","async-queue","cookie","jsonp","jsonp-url"]});YUI.add("ucs-comet-conn",function(f){f.namespace("ucs");var b={counts_max:{unsuccessful:{"/meta/handshake":25,"/meta/subscribe":25,"/meta/unsubscribe":25,"/meta/connect":25,"/meta/disconnect":25}},prod:{notifications:{host:"https://pr.comet.yahoo.com/comet"},mail_count:{host:"https://pr.comet.yahoo.com/comet"},system_status:{host:"https://comet.yahoo.com/comet"}},nonprod:{notifications:{host:"http://stage-comet1.onepush.mobile.gq1.yahoo.com/comet"},mail_count:{host:"http://stage-comet1.onepush.mobile.gq1.yahoo.com/comet"},system_status:{host:"http://perf501.snp.mobile.gq1.yahoo.com/comet"}}},d="connect",c="disconnect",g="message",a="error",e={};f.ucs.CometConn=function(i,h){this.app=i;this.env=h;this.comet=null;this.init(b[h][i]);this.publish(d);this.publish(c);this.publish(g);};f.ucs.CometConn.getConn=function(k,j,l){var h=null,i=null;f.config.debug=window.location.href.match(/debug_comet-conn=1/);j=j||"prod";if(window.location.href.match(/env=nonprod/)){j="nonprod";}if(f.Lang.isUndefined(j)){throw new Error("getConn(): env is required.");}if(f.Lang.isUndefined(k)){throw new Error("getConn(): app is required.");}if(!f.Object.hasKey(b,j)){throw new Error("getConn(): cannot find config for env="+j);}if(!f.Object.hasKey(b[j],k)){throw new Error("getConn(): cannot find config for app="+k);}i=f.Lang.sub("{app}:{env}",{app:k,env:j});if(!f.Object.hasKey(e,i)){e[i]=new f.ucs.CometConn(k,j);}else{}return e[i];};f.ucs.CometConn.prototype={counts:{},init:function(i){var h=this;h.comet=f.initComet(i.host);h.comet.addListener("/meta/handshake",f.bind(h.cbHandShake,h),true);h.comet.addListener("/meta/subscribe",f.bind(h.cbSubscribe,h),true);h.comet.addListener("/meta/unsubscribe",f.bind(h.cbUnsubscribe,h),true);h.comet.addListener("/meta/connect",f.bind(h.cbConnect,h),true);h.comet.addListener("/meta/disconnect",f.bind(h.cbDisconnect,h),true);h.comet.addListener("/meta/unsuccessful",f.bind(h.cbUnsuccessful,h),true);h.resetCounts();},extractMessage:function(h){return{clientId:h.clientId||"",channel:h.channel||"",timestamp:h.timestamp||"",error:h.error||""};},getComet:function(){return this.comet;},getCounts:function(){return this.counts;},resetCounts:function(){this.counts={unsuccessful:{"/meta/handshake":0,"/meta/subscribe":0,"/meta/unsubscribe":0,"/meta/connect":0,"/meta/disconnect":0}};return this;},isDisconnect:function(j){var i=this,h=true;if(j.successful===false){if(f.Object.hasKey(i.counts.unsuccessful,j.channel)){i.counts.unsuccessful[j.channel]++;if(i.counts.unsuccessful[j.channel]<b.counts_max.unsuccessful[j.channel]){h=false;}}}return h;},cbHandShake:function(k){var i=this,h=null,j=null;if(f.Object.hasKey(k,"originalURI")){j=k.originalURI;}else{if(f.Object.hasKey(k,"uri")){j=k.uri;}else{this.fire(a,"uri / originalURI is missing in the callback_handshake response.");return;}}if(j===b[this.env][this.app].host){if(k.successful){i.fire(d,k);}else{i.fire(a,"cb_handshake. successful=false");}}else{i.fire(a,"cb_handshake.uri is not found in config. uri="+j);}if(k&&k.successful){i.resetCounts();i.emitBeacon({sec:"UH 3 Comet",slk:"UH 3 Comet HandShake",dmsgs:i.extractMessage(k),type:"info",source:"ucs-comet-conn",code:"hand"});}else{i.emitBeacon({sec:"UH 3 Comet",slk:"UH 3 Comet HandShake",dmsgs:i.extractMessage(k),type:"error",source:"ucs-comet-conn",code:"hand"});}},cbSubscribe:function(i){var h=this;if(i&&i.successful){h.resetCounts();h.emitBeacon({sec:"UH 3 Comet",slk:"UH 3 Comet Subscribe",dmsgs:h.extractMessage(i),type:"info",source:"ucs-comet-conn",code:"sub"});}else{h.emitBeacon({sec:"UH 3 Comet",slk:"UH 3 Comet Subscribe",dmsgs:h.extractMessage(i),type:"error",source:"ucs-comet-conn",code:"sub"});}},cbUnsubscribe:function(i){var h=this;if(i&&i.successful){h.resetCounts();h.emitBeacon({sec:"UH 3 Comet",slk:"UH 3 Comet Unsubscribe",dmsgs:h.extractMessage(i),type:"info",source:"ucs-comet-conn",code:"unsub"});}else{h.emitBeacon({sec:"UH 3 Comet",slk:"UH 3 Comet Unsubscribe",dmsgs:h.extractMessage(i),type:"error",source:"ucs-comet-conn",code:"unsub"});}},cbConnect:function(i){var h=this;},cbDisconnect:function(i){var h=this;},cbUnsuccessful:function(i){var h=this;if(h.isDisconnect(i)){h.getComet().disconnect();}},cbSystemStatus:function(h){if(h){this.fire("message",h);}},cbNotification:function(h){if(h){this.fire(g,h);}},initSystemStatus:function(h){this.comet.subscribe(h,f.bind(this.cbSystemStatus,this));},initNotification:function(){this.comet.subscribe("/UNP/alerts/*",f.bind(this.cbNotification,this));},emitBeacon:function(h){if(f.Lang.isObject(f.ucs)&&f.Lang.isObject(f.ucs.Beacon)){switch(h.type){case"info":f.ucs.Beacon.info(h);break;case"error":f.ucs.Beacon.error(h);break;}}}};f.augment(f.ucs.CometConn,f.EventTarget,true,null,{emitFacade:true,broadcast:2});},"1.0",{requires:["event","event-custom","comet","ucs-beacon"]});if(window.ucs&&window.ucs.YObj){window.ucs.YObj.use("node","ucs-comet-conn",function(e){var c=null,b=null,d={};c=e.one("#yucs-meta").getAttribute("data-authstate");b=e.one("#yucs-meta").getAttribute("data-property");r=e.one("#yucs-notifications");if(!e.Lang.isObject(r)){if((c==="signedin")||(b==="mail")){if(e.Lang.isFunction(e.ucs.CometConn)){d.notifications=e.ucs.CometConn.getConn("notifications");d.notifications.on("connect",function a(f){d.notifications.initNotification();});}}}});}YUI.add("ucs-disclaimer-seed",function(a){a.namespace("ucs");a.ucs.DisclaimerSeed={init:function(){var j=false,b=a.one("#yucs-disclaimer")?a.one("#yucs-disclaimer"):a.one("#yucs-disclaimer-md"),l=b.getAttribute("data-property"),c=b.getAttribute("data-lang"),i={"bn-in":true,"en-au":true,"en-hk":true,"en-in":true,"en-my":true,"en-nz":true,"en-ph":true,"en-sg":true,"fil-ph":true,"gu-in":true,"hi-in":true,"id-id":true,"kn-in":true,"ml-in":true,"mr-in":true,"ms-my":true,"ta-in":true,"te-in":true,"th-th":true,"vi-vn":true,"zh-hk":true,"zh-hant-hk":true,"zh-hant-tw":true,"zh-tw":true},e=false,h=false,d=a.Cookie.getSub("ucs","disclaimer",Number),m=a.Cookie.getSub("AO","o")?a.Cookie.getSub("AO","o"):a.Cookie.getSub("AO",'"o'),f=a.Cookie.getSub("AO","u")?a.Cookie.getSub("AO","u"):a.Cookie.getSub("AO",'"u'),k=a.Cookie.getSub("AO","t")?a.Cookie.getSub("AO","t"):a.Cookie.getSub("AO",'"t'),g=a.Cookie.getSub("AO","dnt")?a.Cookie.getSub("AO","dnt"):a.Cookie.getSub("AO",'"dnt');if(g){g=g.replace('"',"");g=g.replace("'","");}if(f){f=f.replace('"',"");f=f.replace("'","");}if(m){m=m.replace('"',"");m=m.replace("'","");}else{j=true;}if(g&&g==1){if(m&&m==1&&f&&f==1){j=true;h=true;}if(!d&&m&&m==0){j=true;h=true;}}if(k){j=true;h=true;}if(l==="flickr"){j=true;h=true;}if(l!=="mail"&&i[c]){j=true;e=true;}j=true;e=true;this.jsPath="https://s1.yimg.com/zz/combo?kx/yucs/uh3/disclaimer/191/js/disclaimer-min.js";this.cssPath="https://s1.yimg.com/zz/combo?kx/yucs/uh3/disclaimer/191/css/disclaimer-min.css";if(g&&g==1&&j===false){if(!d||d<2){this.loadCSS();}}if(g&&g==1&&e===true&&h===false){g=a.Cookie.get("AO",{raw:true});g=g.replace("o=1","o=0");a.Cookie.set("AO",g,{expires:new Date("January 12, 2025"),path:"/",domain:"yahoo.com",raw:true});}},loadCSS:function(){var b={onSuccess:function(){this.loadJS();},onFailure:function(){this.loadCSS();},context:this};a.Get.css(this.cssPath,b);},loadJS:function(){var b={onFailure:function(){this.loadJS();},context:this};a.Get.script(this.jsPath,b);}};},"1.0",{requires:["node","cookie"]});(function(){if(typeof ucs!=="undefined"&&ucs.YObj){ucs.YObj.use("ucs-disclaimer-seed",function(c){c.ucs.DisclaimerSeed.init();});}else{var b=document.getElementById("yUnivHead"),a=(b&&b.getAttribute("data-property")==="srp")?Y:YUI();a.use("ucs-disclaimer-seed",function(c){c.ucs.DisclaimerSeed.init();});}}());YUI.add("ucs-simple-menu",function(f){f.namespace("ucs.MoreMenu");var d="yucs-menu-active",e="role",a="tabIndex",b=">li>a",c="parentNode";f.ucs.MoreMenu=function(g){f.ucs.MoreMenu.superclass.constructor.call(this,g);g.removeClass("yucs-more-activate");this.ylt=g.getAttribute("data-ylt");this.topBar=f.one("#yucs-top-bar");this._init();};f.extend(f.ucs.MoreMenu,f.ucs.MenuUtils,{_init:function(){this._position();this._initAriaTopbar();this._initEvents();},_initEvents:function(){this.menu.detach("hover");this.panel.detach("hover");f.one("#yucs-more-link").on("click",this._handleMenuClick,this);f.Global.on("ucs:menuNavShow",this._hideMenu,this);},_handleMenuClick:function(g){g.halt();if(this.panel.hasClass("yucs-hide")){this._showMenu(g);this.menu.removeClass("yucs-has-focus");this.menu.one("a").blur();this.documentClickHandle=f.one("body").on("click",this._handleDocumentClick,this);this.documentMouseDownHandle=f.one("body").on("mousedown",this._handleDocumentClick,this);}else{this._hideMenu();}},_position:function(){var g=this.menu.get("region").height;g=g-2;f.one("#yucs-top-menu").setStyle("top",g+"px");},_sendBeacon:function(){window.ucs._sendBeacon(this.ylt);},_showMenu:function(g){if(this.panel.hasClass("yucs-hide")){this._sendBeacon();this.menu.addClass(d);f.ucs.MoreMenu.superclass._showMenu.apply(this,arguments);}},_hideMenu:function(g){f.ucs.MoreMenu.superclass._hideMenu.apply(this,arguments);this.menu.removeClass(d);},_handleKeyup:function(g){if(27===g.keyCode||9===g.keyCode){this.menu.one("a").focus();this._hideMenu();}else{if(40===g.keyCode&&!this.keyedup){if(this.panel.one("a")){this._handleMenuClick(g);this.panel.one("a").focus();}this.keyedup=true;}}},_initAriaTopbar:function(){if(!this.topBar){return;}this.toolbar=f.one("#yucs-top-list");this.toolbar.set(e,"toolbar");this.toolbar.all(">li").set(e,"presentation");this.toolbar.delegate("mouseenter",function(g){g.currentTarget.removeClass("yucs-has-focus");},">li");this.fm=this.toolbar.plug(f.Plugin.NodeFocusManager,{descendants:b,keys:{next:"down:39",previous:"down:37"},focusClass:{TABINDEX_ATTR:"-1",className:"yucs-has-focus",fn:function(g){return g.get(c);}},circular:true});this.panel.focusManager.get("descendants").after("keydown",function(g){if(9===g.keyCode){this.panel.focusManager.focus(0);this._hideMenu();}},this);this.toolbar.focusManager.get("descendants").after("keyup",function(g){if(9===g.keyCode){this.toolbar.focusManager.focus(0);}if(27===g.keyCode){this.menu.one("a").focus();this._hideMenu();}},this);}});},"1.0",{requires:["node","event","ucs-menu-utils","event-resize","event-hover","node-focusmanager","event-mouseenter","event-delegate"]});(function(){ucs.YObj.use("node","ucs-simple-menu",function(b){var c=b.one("#yucs-more.yucs-more-activate"),a;if(c){a=new b.ucs.MoreMenu(c);}});})();ucs.YObj.use("node","node-core","event-base","event-mousewheel","event-resize","dom-screen",function(a){var g=a.one("body"),f=a.one("html"),e=false,h="page-has-scrolled",b="yucs-fixed",i,d=false;if(a.one("#yucs.persist-init")){return;}a.one("#yucs").addClass("persist-init");if(a.one(".yucs-games")&&a.one(".yom-games-gameplay, .yom-games-yap")!=null){f.addClass(b);return;}function c(){if(a.DOM.winWidth()>970){f.removeClass(b);}else{f.addClass(b);}}if(!a.UA.ie||a.UA.ie>6){c();a.on("windowresize",c);}if((window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop)>0){g.addClass(h);e=true;}a.on("scroll",function(){var j=window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop;if(j===0){g.removeClass(h);e=false;}else{if(!e){g.addClass(h);e=true;}}});});if(typeof(YAHOO)=="undefined"){YAHOO={};}if(typeof(YAHOO.util)=="undefined"){YAHOO.util={};}if(typeof(YAHOO.util.UHScriptNodeDataSource)=="undefined"){YAHOO.util.UHScriptNodeDataSource={};}YUI.add("ucs-search",function(d){var p={"&":" ","<":" ",">":" ",'"':" ","'":" ","/":" ","`":" "};if(!ucs.Search){var h="value",m="click",u="suggest",c="touchstart",t="submit",s="innerHTML",a="tabindex",f="target",o=20,b=10,e=parseInt(d.one("#yucs").getStyle("paddingLeft"),b),j="yucs-qry",n="yucs-content-qry",v="#yucs-satray",i=d.one("#yucs-debug"),r="#yucs-btn-delete",q="https://s.yimg.com/kx/yucs/uh3/search/593/js/mini-assist-min.js",l="https://s.yimg.com/kx/yucs/uh3/search/js/442/tray-align-plugin-min.js",g="https://s.yimg.com/lq/lib/s7/tray-shim-plugin-201009101433.js",k="https://s.yimg.com/kx/yucs/uh3/search/css/434/assist-min.css";ucs.Search=function(w){if(typeof w.getDOMNode==="function"){this.form=(w.getDOMNode().nodeName.toLowerCase()==="form")?w:w.one("form");}else{this.form=w.one("form");}this.searchWrapper=d.one("#yucs-search");this.searchFormClass=d.one(".yucs-search");this.buttons=this.form.all("button");this.stype=this.form.one("#yucs-search_type");this.form.set("onsubmit",null);this.yucs=d.one("#yucs");this.loadedAssist=false;this.property=d.one("#yucs").getData("property");this.cleanBtn=d.one(r);this.languagetag=d.one("#yucs").getAttribute("data-lang");this.init();};ucs.Search.prototype={isWebSearch:false,init:function(){var C=this.property;var A=navigator.userAgent.toLowerCase();if(d.one(".enable_form_focus")&&C!=="mail"){if(C==="foo"&&d.UA.ie&&d.UA.ie<10){d.on("domready",function(){document.getElementById("mnp-search_box").focus();});}else{if(C==="foo"&&d.UA.ie==10){d.later(1,this,function(){document.getElementById("mnp-search_box").blur();document.getElementById("mnp-search_box").focus();this._setCaretStart();});}else{document.getElementById("mnp-search_box").focus();}}}else{if(C==="foo"&&d.UA.ie&&d.UA.ie<10){d.on("domready",function(){document.getElementById("mnp-search_box").focus();});}else{if(C==="foo"&&d.UA.ie==10){d.later(1,this,function(){document.getElementById("mnp-search_box").blur();document.getElementById("mnp-search_box").focus();this._setCaretStart();});}}}this.searchWrapper.removeClass("yucs-search-activate");this._setTabIndex();this.is2Button=(this.buttons.size()===2)&&!this.searchWrapper.hasClass("yucs-one_button");if(this.searchFormClass.getAttribute("data-webaction")){this.form.one("input").setAttribute("name","p");this.searchFormClass.setAttribute("action",this.searchFormClass.getAttribute("data-webaction"));d.one("#yucs-sprop_button").setAttribute("data-vsearch",d.one("#mnp-search_box").getAttribute("data-yltvsearch"));}if(this._hasPlaceholderSupport()&&!d.UA.ie){var z=document.getElementById("mnp-search_box");z.removeAttribute("data-sh");}if((C==="finance")&&!this.is2Button){document.getElementById("mnp-search_box").name="s";}this.input=this.form.one("input");this.vertSearchBtn=this.form.one("#yucs-sprop_button");this.webSearchBtn=this.form.one("#yucs-search_button");this.searchToggleBtn=this.form.one("#yucs-search_toggle_button");this.searchHint=this.input.getAttribute("data-sh");this.yltvsearch=this.input.getAttribute("data-yltvsearch");this.yltvsearchsugg=this.input.getAttribute("data-yltvsearchsugg");if(!this._inputIsEmpty()&&!this._inputIsDefaultTerm()&&!this.loadedAssist){this.loadedAssist=true;this._initAssist();}if((d.one("#yucs")&&d.one("#yucs").getAttribute("data-linktarget"))){this.linkTarget=d.one("#yucs").getAttribute("data-linktarget");}else{this.linkTarget=this.form.getAttribute("target")||"_top";}this._setFormTarget();var y=this.input.getAttribute("data-resize");if(!y||y==="enable"){this._initSizeControl();}this._initEventListeners();if(this.vertSearchBtn){this.vertSearchBtn.setAttribute("onclick","");}this.form.removeClass("yucs-activate");var x=document.URL,B=/[?&]p=([^&]+)/i,w=B.exec(x);if(w===null&&C==="help"){B=/[?&]question_box=([^&]+)/i;w=B.exec(x);}if(w!==null&&(C==="answers"||C==="help"||C==="shopping")){d.one(".yucs-search-input").setAttribute("value",decodeURIComponent(w[1].replace(/\+/g," ")));}if(document.activeElement!==this.input._node&&this.input.get(h)===""){this._resetSearchInput();}if(d.one("#search_hot_keyword_block")&&C!=="mail"){this._initHotKeyword();}else{if(d.one("#search_hot_keyword_block")&&C!=="mail"){d.one("#advanced-search").set("offsetWidth",d.one(".yucs-search-input").get("offsetWidth"));}}},html:function(w){return(w+"").replace(/[&<>"'\/`]/g,this._htmlReplacer);},_htmlReplacer:function(w){return p[w];},_initSizeControl:function(){this.oldYucsWidth=this.yucs.get("region").width;this.isRTL=/ar|he/gi.test(d.one("#yucs").getAttribute("data-lang").split("-")[0]);this.leftWrapperWidth=this._calcLeftWrapperWidth();this.leftWrapper=d.one(".yucs-fl-left");this.rightWrapper=d.one(".yucs-fl-right");this.defaultWidth=parseInt(this.searchWrapper.getComputedStyle("width"),b);this.IEOffset=0;if(d.UA.ie>0&&d.UA.ie<=7){this._calcIEOffset();}this._resizeSearchContainer(this.oldYucsWidth);d.on("windowresize",d.bind(this._handleWindowResize,this));},_hasPlaceholderSupport:function(){var w=document.createElement("input");return("placeholder" in w);},_initEventListeners:function(){var w=this.form.on(t,this._handleSubmit,this);this.input.on("keydown",this._handleInputKeypress,this);this.input.on("blur",this._handleInputBlur,this);this.input.on("keyup",this._handleInputKeyup,this);this.input.on("click",this._handleInputClick,this);if(this.stype){this._initSearchTypeMenu();}if(this.property==="mail"||this.is2Button){this.webSearchBtn.on(m,this._handleWebSearchClick,this);if(this.vertSearchBtn){this.vertSearchBtn.on(m,this._handleVertSearch,this);}if(d.UA.ie){w.detach();this.webSearchBtn.on(m,this._handleWebSearchClick,this);this.form.on(t,this._handleVertSearch,this);}this.publish("ucs:webSearch",{broadcast:2,emitFacade:true});d.Global.on("ucs:webSearch",this._handleWebSearchEvent,this);d.Global.on("ucs:mailSearch",this._trackMailSearch,this);
d.Global.on("ucs:mailSearchSugg",this._trackMailSearchSugg,this);}if(this.cleanBtn){this.cleanBtn.on("click",this._resetSearchInput,this);}},_initSearchTypeMenu:function(){this.stype.one(".yucs-stype_prop").setData("yucs-stype","propsearch");this.stype.one(".yucs-stype_web").setData("yucs-stype","web");this.stype.delegate("click",function(C){var y=this.stype.one(".yucs-active"),x=this.stype.one(".yucs-inactive"),A,w,z,B;C.preventDefault();if(parseFloat(YUI.version,10)>3.1){x.toggleView();}else{if(x.getStyle("display")=="none"){x.setStyle("display","block");}else{x.setStyle("display","none");}}if(C.target.hasClass("yucs-active")||C.target.hasClass("yucs-inactive")){z=y.getData("yucs-stype");B=C.target.getData("yucs-stype");if(z!=B){A=y.get("text");w=C.target.get("text");y.set("text",w);y.setData("yucs-stype",B);x.set("text",A);x.setData("yucs-stype",z);}}},"span",this);this.stype.one(".yucs-active").on("focus",function(w){if(inactiveElm.getStyle("display")=="none"){this.stype.one(".yucs-inactive").show();}},this);this.stype.one(".yucs-inactive").on("blur",function(w){this.stype.one(".yucs-inactive").hide();},this);},_calcLeftWrapperWidth:function(){var w=d.all(".yucs-fl-left > div"),y=e,z,x;w.each(function(A){if(A.get("id")!=="yucs-search"){y+=A.get("offsetWidth")+parseInt(A.getStyle("marginLeft"),b)+parseInt(A.getStyle("marginRight"),b);}else{y+=parseInt(A.getStyle("marginLeft"),b)+parseInt(A.getStyle("marginRight"),b);}});return y;},_calcIEOffset:function(){var x=d.all(".yucs-search-buttons").pop(),w=x.intersect(this.searchWrapper);if(d.one("body").getAttribute("dir")==="rtl"){this.IEOffset=w.left-this.searchWrapper.getX();}else{this.IEOffset=this.searchWrapper.getX()+parseInt(this.searchWrapper.getComputedStyle("width"),b)-w.right;}this.defaultWidth+=this.IEOffset;},_handleWindowResize:function(){var w=this.yucs.get("region").width;if(w!==this.oldYucsWidth){this._resizeSearchContainer(w);this.oldYucsWidth=w;}},_setInputWidth:function(){var w=d.one(".yucs-form-input"),x=parseInt(this.input.getStyle("paddingLeft"))+parseInt(this.input.getStyle("paddingRight"))+parseInt(this.input.getStyle("borderLeftWidth"))+parseInt(this.input.getStyle("borderRightWidth"));this.input.setStyle("width",(w.get("region").width-x)+"px");},_resizeSearchContainer:function(z){var y=this.searchWrapper.get("region").width,x=this.rightWrapper.get("region").width+e,w=z-(this.leftWrapperWidth+x+o)+this.IEOffset;if(w>this.defaultWidth){if(y===this.defaultWidth){return;}else{w=this.defaultWidth;}}if(this.IEOffset>0&&this.isRTL){this.searchWrapper.setStyle("visibility","hidden");}this.searchWrapper.setStyle("width",w+"px");if(this.IEOffset>0&&this.isRTL){d.later(50,this,function(){this.searchWrapper.setStyle("visibility","visible");});}},_getInputValTrimmed:function(){var w=this.input.get(h);w=d.Lang.trim(w);return w;},_inputIsEmpty:function(){return this._getInputValTrimmed()==="";},_inputIsDefaultTerm:function(){return this._getInputValTrimmed()===this.searchHint;},_handleInputKeyup:function(w){if(this._inputIsEmpty()){this._resetSearchInput();this._setCaretStart();}else{if(!this._inputIsDefaultTerm()){this._setTabIndex();}}if(!this.loadedAssist){this.loadedAssist=true;this._initAssist();}this._showCleanBtn();},_handleInputClick:function(){if(this._inputIsDefaultTerm()){this._resetSearchInput();this._setCaretStart();}},_setCaretStart:function(){var y;if((y=window.document.selection)){if(y.type!="Control"){var w=this.input.get("value").length,x=y.createRange();x.move("character",-w);x.select();}}},_setTabIndex:function(){var w=(d.UA.ie>0&&d.UA.ie<=7);this.buttons.each(function(x){var y=x.getAttribute(a);if((w&&y===0)||(w&&y===65535)||(y&&!(w&&y===32768))){x.setAttribute(a,0);}else{x.setAttribute(a,-1);}});},_setFormTarget:function(){if(this.linkTarget==="_blank"||this.form.hasClass("yucs-search-fh")){this.form.setAttribute(f,"searchWin");}else{this.form.setAttribute(f,this.linkTarget);}},_initAssist:function(){var w=this.input.getAttribute("data-satype");switch(w){case"mini":this._initMiniAssist(this.input._node);break;case"rich":this._initRichAssist(this.input._node);break;default:break;}},_buildAssistConfig:function(w){var x={searchbox:w,clid:"uh-yui3",align:true,shim:1,nresults:w.getAttribute("data-maxresults")||10};x.node=v;if(w.getAttribute("data-pubid")){x.pubid=w.getAttribute("data-pubid");}if(w.getAttribute("data-gosurl")){x.url=w.getAttribute("data-gosurl");}if(d.one("#yucs-sfilter")&&d.one("#yucsHead").hasClass("ua-ie")){x.tray={plugin:{align:"#yucs-input_wrap"}};}var y=parseInt(w.getAttribute("data-minlength"),10);if(!isNaN(y)){x.minLength=1;}return x;},_getUHB:function(){var w=d.one("#uhb");return w&&w.get("value")||"uhb2";},_initMiniAssist:function(y){var w=this,x={"miniassist":{fullpath:q,requires:["base","get","node","event-focus","plugin","array-extras"]},"miniassist-skin":{fullpath:k,type:"css"},"tray-align-plugin":{fullpath:l,requires:["miniassist"]},"tray-shim-plugin":{fullpath:g,requires:["miniassist"]}};ucs.YObj.applyConfig({modules:x});ucs.YObj.use("miniassist","miniassist-skin","tray-align-plugin","tray-shim-plugin","event-move","escape",function(A){if(ucs.YObj.config.fetchCSS===false){A.Get.css(k);}var I=new A.Node(y),G=w._buildAssistConfig(I),E=A.one(v),C=E.getAttribute("data-vfr");w.sa=new A.Search.MiniAssist(G);if(!isNaN(G.minLength)){w.sa.assist.set("minLength",1);}w.sa.assist._checkValue();w.sa.gossip.set("scrollSize",13);w.sa.gossip.set("linkStem",E.getAttribute("data-vsearch"));if(A.one("#search_hot_keyword_block")){var K="",H="",z=A.one("#yucs").getData("property"),B=A.one("#yucs").getAttribute("data-lang");if("sports"===z&&B==="zh-hant-tw"){K="tw.sports.yahoo.com";}else{if("ivy"===z&&B==="zh-hant-tw"){H="hq";}else{if("omg"===z&&B==="zh-hant-hk"){K="hk.ent.yahoo.com";}else{if("finance"===z&&B==="zh-hant-hk"){K="hk.finance.yahoo.com";}else{if("lifestyles"===z&&B==="zh-hant-hk"){K="hk.lifestyle.yahoo.com";}}}}}if(K!==""){w.sa.gossip.set("linkParams",{fr:C,"vs":K});}else{if(H!==""){w.sa.gossip.set("linkParams",{fr:C,"ilk":H});
}else{w.sa.gossip.set("linkParams",{fr:C});}}}else{w.sa.gossip.set("linkParams",{fr:C});}if(!w.is2Button){w.sa.gossip.set("hideEmptyTray",false);}if(w.property==="finance"&&w.languagetag!=="zh-hant-hk"){var J=A.one(G.node),D=J.getAttribute("data-vstext"),F=J.getAttribute("data-vert_fin_search"),L=w._getUHB();w.sa.gossip.set("uhbParams",{uhb:L,fr:C});w.sa.assist.on(u,function(N){if(N.query){var M=A.one("#"+n),O=w.sa.buildSearchUrl(I,N.query,F,{fr:C});if(w.property==="finance"){O=O.replace("?s=","?p=");}if(!M){if(document.getElementById("hspart")){O+="&hspart="+document.getElementById("hspart").value;}if(document.getElementById("hsimp")){O+="&hsimp="+document.getElementById("hsimp").value;}if(document.getElementById("yucs-hstype")){O+="&type="+document.getElementById("yucs-hstype").value;}M=A.Node.create("<ul id='"+n+"'><li><a id='searchVertical' href='"+O+"'>"+D+"<q>"+A.Escape.html(N.query)+"</q></a></li></ul>");A.one(".sa-panel").append(M);}else{M.one("li").setContent("<a  id='searchVertical' href='"+O+"' text='"+A.Escape.html(N.query)+"'>"+D+" <q>"+A.Escape.html(N.query)+"</q></a>");}}});}A.one(".yucs-search").on("submit",function(N){if(A.one("#"+j+" a.sa-active")){var M=A.one("#"+j+" a.sa-active").getAttribute("href");N.preventDefault();if(w.linkTarget==="_blank"||w.form.hasClass("yucs-search-fh")){window.open(M,"searchWin");}else{window.location.href=M;}}});});},_initRichAssist:function(y){var w=this,x={richassist:{fullpath:"https://s.yimg.com/lq/lib/s7/richassist-yui3-201009101433.js",requires:["base","get","node","event-focus","plugin"]},"tray-align-plugin":{fullpath:"https://s.yimg.com/lq/lib/s7/tray-align-plugin-201009101433.js",requires:["richassist"]},"tray-shim-plugin":{fullpath:"https://s.yimg.com/lq/lib/s7/tray-shim-plugin-201009101433.js",requires:["richassist"]}};ucs.YObj.applyConfig({modules:x});ucs.YObj.use("richassist","tray-align-plugin","tray-shim-plugin",function(B){var z=new B.Node(y),A=w._buildAssistConfig(z);w.sa=new B.Search.RichAssist(A);});},_setInputBlank:function(){this.input.set(h,"");},_handleSearchToggle:function(w){w.preventDefault();this._toggleSearch();},_toggleSearch:function(){var w=this,x=function(y){w._handleBodyClick(y);};d.one("#yucs").toggleClass("yucs-show_search");if(!this.bodyClick){if(d.UA.mobile&&("createTouch" in document)&&("addEventListener" in document.body)){d.log("using touchstart in mobile browser","info","search");document.body.addEventListener(c,x,false);this.bodyClick={detach:function(){if("removeEventListener" in document.body){document.body.removeEventListener(c,x,false);}}};}else{this.bodyClick=d.one("body").on(m,this._handleBodyClick,this);}this.bodyScroll=d.on("scroll",function(y){this._toggleSearch();},this);}else{this.bodyClick.detach();this.bodyScroll.detach();this.bodyClick=this.bodyScroll=null;}},_handleBodyClick:function(y){var x=y&&y.target||null,w;if(!x){return;}w=typeof x.ancestor==="function"?x:d.one(x);if(w&&!w.ancestor("#yucs")){this._toggleSearch();}},_handleWebSearchClick:function(w){this.isWebSearch=true;if(this.form.one("#yucs-sky-term")){this.form.one("#yucs-sky-term").set(h,this._getInputValTrimmed());}if(this.sa&&this.is2Button){this.sa.set("iswebsearch",true);}},_handleSubmit:function(x){if(this.form.one("#yucs-sky-term")){this.form.one("#yucs-sky-term").set(h,this._getInputValTrimmed());}if(this._inputIsDefaultTerm()){this._setInputBlank();}if(x&&x.target){this.isWebSearch=d.one(x.target).hasClass("yucs-wsearch-button");}if(document.getElementById("yuhead-att-cat")){if(this.form.getAttribute(f)!=="searchWin"){x.preventDefault();}var w=d.Node.create("<img />");w.once("load",this._handleImageLoad,this);w.once("error",this._handleImageLoad,this);this._timer=window.setTimeout(d.bind(this._handleImageLoad,this),2000);w.set("src","https://attadworks.turn.com/r/dd/id/L21rdC8xMDAvY2lkLzE1OTE3NzExL3QvMg/qry/"+encodeURIComponent(this._getInputValTrimmed()));}},_handleImageLoad:function(w){if(this._timer!==null){clearTimeout(this._timer);this._timer=null;}if(this.form.getAttribute(f)!=="searchWin"){this.form.submit();}},_handleInputKeypress:function(z){var y=this._inputIsDefaultTerm(),x,w;if((z.keyCode===46||z.keyCode===8)&&y){z.preventDefault();return;}else{if(z.keyCode!==9&&z.keyCode!==13){if(y){this._setInputBlank();this.input.removeClass("yucs-search-hint-color");}if(!this.loadedAssist){this.loadedAssist=true;this._initAssist();}}else{if(z.keyCode===13&&!y){this.enterButtonPressed=true;x=z.target.getAttribute("data-enter-fr");w=z.target.getAttribute("data-enter-ylt");if(w){this.form.setAttribute("action",w);}if(x){if(this.is2Button){this.vertSearchBtn.setAttribute("data-vfr",x);}else{this._setFrCode(x);}}}}}},_handleInputBlur:function(w){if(this._inputIsEmpty()){this._resetSearchInput();}},_handleVertSearch:function(C){d.log("handleVertSearch");if(this.isWebSearch||d.one("#"+j+" a.sa-active")){this.isWebSearch=false;return;}C.preventDefault();if(this._inputIsEmpty()){return;}var y=C.target.getAttribute("data-vsearch"),E="1button",A,w=this.property,x=this.languagetag,z=C.target.getAttribute("data-vfr"),F=this.input.getAttribute("data-enter-ylt");if(this.is2Button){E="2button";}if(!y){y=this.vertSearchBtn.getAttribute("data-vsearch");}if(this.enterButtonPressed&&F){y=F;}if(y&&w!=="mail"){A=y.split("?");if(A.length==1){A="";}else{y=A[0];A=A[1];}if(w==="finance"&&x!="zh-hant-hk"){y+="?uhb="+this._getUHB()+"&fr="+z+"&type="+E+"&s="+encodeURIComponent(this.input.get(h));if(d.one("#searchAll")&&d.one("#searchAll").hasClass("sa-active")){y=d.one("#searchAll").getAttribute("href");}if(d.one("#searchVertical")&&d.one("#searchVertical").hasClass("sa-active")){y=d.one("#searchVertical").getAttribute("href");}}else{if(w==="groups"){y+="?query="+encodeURIComponent(this.input.get(h));}else{if(w==="help"){this.helpForm=d.one("#landingSearch");if(!this.helpForm){this.helpForm=d.one("#question_form");}var B=this;if(this.helpForm){this.vsu="";var D=this.helpForm.one('input[type="text"]').getAttribute("name");this.helpForm.all('input[type="hidden"]').each(function(G){B.vsu+=G.getAttribute("name")+"="+G.getAttribute("value")+"&";
},B);y=this.helpForm.getAttribute("action");y+="?"+this.vsu+D+"="+encodeURIComponent(this.input.get(h));if(D!="question_box"){y+="&p="+encodeURIComponent(this.input.get(h));}}else{y+="?fr="+z+"&type="+E+"&query="+encodeURIComponent(this.input.get(h));}}else{if(x=="zh-hant-tw"&&(w=="omg"||w=="news"||w=="ivy")){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h))+"&ei=UTF-8";if(w=="ivy"){y+="&ilk=hq";}}else{if(w=="sports"&&x=="zh-hant-tw"){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h))+"&ei=UTF-8&vs=tw.sports.yahoo.com";}else{if(w=="omg"&&x=="zh-hant-hk"){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h))+"&vs=hk.ent.yahoo.com&ei=UTF-8";}else{if(w=="finance"&&x=="zh-hant-hk"){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h))+"&vs=hk.finance.yahoo.com&ei=UTF-8";}else{if(w=="news"&&x=="zh-hant-hk"){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h))+"&ei=UTF-8";}else{if(w=="lifestyles"&&x=="zh-hant-hk"){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h))+"&vs=hk.lifestyle.yahoo.com&ei=UTF-8";}else{if(w=="money"&&x=="zh-hant-tw"){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h))+"&vs=tw.money.yahoo.com&ei=UTF-8";}else{if(z){y+="?fr="+z+"&type="+E+"&p="+encodeURIComponent(this.input.get(h));}else{y+="?type="+E+"&p="+encodeURIComponent(this.input.get(h));}}}}}}}}}}}if(A){y+="&"+A;}if(this.linkTarget==="_blank"||this.form.hasClass("yucs-search-fh")){window.open(y,"searchWin");}else{if(window!=window.top){window.top.location.href=y;}else{window.location.href=y;}}}else{this._fireVertSearchEvent(C);}},_fireVertSearchEvent:function(x){var w=this.input.get(h);this.publish("ucs:verticalSearchAction",{broadcast:2,emitFacade:true});this.fire("ucs:verticalSearchAction",{"query":w});},_handleWebSearchEvent:function(w){if(w.query){this.input.set("value",w.query);}this.form.submit();},_fireInterfaceReady:function(){this.publish("ucs:uhSearchInterfaceReady",{broadcast:2,emitFacade:true});this.fire("ucs:uhSearchInterfaceReady");},_getSearchInput:function(){return this.input;},_resetSearchInput:function(){if(this.searchHint){this.input.addClass("yucs-search-hint-color");}this._hideCleanBtn();this.input.set(h,this.searchHint);},_setSearchInput:function(w){this.input.set(h,w);},_getVertSearchBtnContent:function(){return this.vertSearchBtn.get(s);},_initHotKeyword:function(){var x=this.yucs.getAttribute("data-lang").split("-").pop(),y=d.one("#search_hot_keyword_block");var z={"title":"熱門 : ","count":8,"max_charaters":30,"data":"","url":"http://global.tts.search.yahoo.com/pulse.php","fr":this.vertSearchBtn.getAttribute("data-vfr"),"format":"json","intl":x,"type":"metro","src":"metro","order":"rank","retry":1,"project_id":0,"tracking_id":0,"host":"a.analytics.yahoo.com","colo":"","fr_code":"","spaceid":y.getData("spaceid"),"bucketid":y.getData("bucketid")};if("zh-hant-tw"===this.languagetag&&("news"===this.property||"omg"===this.property||"sports"===this.property||"ivy"===this.property||"mail"===this.property||"money"===this.property)){z.project_id=1167069579;z.tracking_id=10001167069579;z.host="y3.analytics.yahoo.com";z.colo="VSCALE4";if(z.fr==="tw_uh3_news_vert_1"){z.fr_code="tw_uh3_news_tts_1";}else{if(z.fr==="tw_uh3_news_vert_2"){z.fr_code="tw_uh3_news_tts_2";}else{if(z.fr==="tw_uh3_omg_vert_1"){z.fr_code="tw_uh3_omg_tts_1";}else{if(z.fr==="tw_uh3_sports_vert_1"){z.fr_code="tw_uh3_sports_tts_1";}else{if(z.fr==="tw_uh3_screen_vert_1"){z.fr_code="tw_uh3_screen_tts_1";}else{if(z.fr==="tw_uh3_mail_vert_1"){z.fr_code="tw_uh3_mail_tts_1";}else{if(z.fr==="uh3_money_vert"){z.url="https://tw.search.yahoo.com/tts";z.type="webttstw";z.fr_code="uh3_money_tts";}}}}}}}if("omg"===this.property||"ivy"===this.property){z.type="uh3omg";}}else{if("zh-hant-hk"==this.languagetag&&("omg"==this.property||"lifestyles"==this.property||"finance"==this.property||"news"==this.property||"mail"==this.property)){z.project_id=21324579;z.tracking_id=100021324579;z.host="y3.analytics.yahoo.com";z.colo="ONO";if(z.fr==="hkomg"){z.fr_code="hk_uh3_ent_tts_1";}else{if(z.fr==="hk_uh3_news_vert_1"){z.fr_code="hk_uh3_news_tts_1";}else{if(z.fr==="hk_uh3_finance_vert_1"){z.fr_code="hk_uh3_finance_tts_1";}else{if(z.fr==="hk_uh3_lifestyle_vert_1"){z.fr_code="hk_uh3_lifestyle_tts_1";}else{if(z.fr==="hk_uh3_mail_vert_1"){z.fr_code="hk_uh3_mail_tts_1";}}}}}if("news"==this.property||"finance"===this.property||"mail"===this.property){z.type="shine";}else{if("omg"===this.property||"lifestyles"===this.property){z.type="entertainment";}}}}var w=z.url+"?fr="+z.fr_code+"&format="+z.format+"&count="+z.count+"&intl="+z.intl+"&type="+z.type+"&src="+z.src+"&order="+z.order+"&jsonp_cb=YAHOO.util.UHScriptNodeDataSource.callbacks";this._getHotKeyword(w,z);},_getHotKeyword:function(x,w){d.Get.script(x,{onSuccess:YAHOO.util.UHScriptNodeDataSource.callbacks});YAHOO.util.UHScriptNodeDataSource.callbacks=function(z){if(z!==undefined&&z[0]!==undefined){var E=0,C=1;var y='<marquee scrollamount="2" scrolldelay="120" direction="up" height="18" behavior="slide" loop="1">'+'<ul id="search_hot_keyword_items" class="search_hot_keywork_items">'+'<li id="search_hot_keyword_title">'+w.title+"</li>";for(var G in z){if(undefined!==z[G].display_term){E+=z[G].display_term.length;if(E>w.max_charaters){break;}if(G<w.count){y+='<li class="search_hot_keyword_item">';if(d.UA.ie&&d.UA.ie<9){y+='<a href="'+z[G].link+'" data-ylk="sec:search_hot_keyword_items;slk:search_hot_keyword_item_'+C+'">';}else{y+='<a href="#" onClick="setTimeout(function(){window.location.href=\''+z[G].link+'\';}, 2000)" data-ylk="sec:search_hot_keyword_items;slk:search_hot_keyword_item_'+C+'" class="rapidnofollow">';}y+=z[G].display_term;y+="</a></li>";C++;}}}y+="</ul></marquee>";this.hotKeywordBlock=d.one("#search_hot_keyword_block");this.hotKeywordBlock.set("innerHTML",y);var I={ultkey1:"search hot keyword",A_pn:"search hot keyword pn",tim:"red"};var F={project_id:w.tracking_id,host:w.host,cf:{22:w.fr_code}};var D={compr_type:"deflate",debug:false,tracked_mods:{"search_hot_keyword_items":"search_hot_keyword_items"},keys:I,spaceid:w.spaceid,ywa:F,nofollow_class:["rapidnofollow","search_hot_keyword_items"]};
if(typeof(YAHOO.i13n)=="undefined"){YAHOO.i13n={};}if(typeof(YAHOO.i13n.Rapid)=="undefined"){var A="https://s.yimg.com/ss/rapid-3.12.1.js",H="https://s.yimg.com/ss/rapidworker-1.1.js";d.Get.js([A,H],function(K){if(K){console.log("get rapid js error");}else{var J=new YAHOO.i13n.Rapid(D);}});}else{var B=new YAHOO.i13n.Rapid(D);}}};},_hideCleanBtn:function(){if(d.one(r)){d.one(r).setStyle("display","none");}},_showCleanBtn:function(){if(d.one(r)){d.one(r).setStyle("display","inline-block");}},_setFrCode:function(w){if(w){d.one("#fr").set("value",w);}},_getFrCode:function(){return d.one("#fr").get("value");},_setVertSearchBtnContent:function(w){this.vertSearchBtn.set(s,(w["text"])?w["text"]:w);},_setVertSearchBtnPathName:function(w){this.vertSearchBtn.setAttribute("data-vsearch",w);},_trackMailSearch:function(){d.log("Mail search");this._sendBeacon(this.yltvsearch);},_trackMailSearchSugg:function(){d.log("Mail search sugg");this._sendBeacon(this.yltvsearchsugg);},_trackPropSearch:function(){d.log("Prop Search");this._sendBeacon(this.yltvsearch);},_sendBeacon:window.ucs._sendBeacon};d.augment(ucs.Search,d.EventTarget);}},"1.0",{requires:["node","event","event-custom","event-resize","dom-screen"]});ucs.YObj.use("node","ucs-search",function(b){var a=b.all("#yucs-search.yucs-search-activate");a.each(function(f,c,e){if(f.ancestor(".yucs-fl-left")){ucs.UhSearchInterface=new ucs.Search(f);ucs.UhSearchInterface.getInput=function(){return ucs.UhSearchInterface._getSearchInput();};ucs.UhSearchInterface.setInput=function(g){ucs.UhSearchInterface._setSearchInput(g);};ucs.UhSearchInterface.getFrCode=function(){return ucs.UhSearchInterface._getFrCode();};ucs.UhSearchInterface.setFrCode=function(g){ucs.UhSearchInterface._setFrCode(g);};ucs.UhSearchInterface.resetInput=function(){ucs.UhSearchInterface._resetSearchInput();};ucs.UhSearchInterface.getVertSearchBtnText=function(){return ucs.UhSearchInterface._getVertSearchBtnContent();};ucs.UhSearchInterface.setVertSearchBtnText=function(g){ucs.UhSearchInterface._setVertSearchBtnContent(g);};ucs.UhSearchInterface.setVertSearchBtnPathName=function(g){ucs.UhSearchInterface._setVertSearchBtnPathName(g);};ucs.UhSearchInterface._fireInterfaceReady();}else{b.log("instantiating search components");var d=new ucs.Search(f);}});});YUI.add("ucs-helpmenu",function(d){d.namespace("ucs.HelpMenu");var u="ucs:helpMenuShow",g="ucs:helpDebugMenuShow",m="ucs:helpMenuItemClick",l="ucs:helpDebugMenuItemClick",s="yucs-help_button",a="ucs:utilityMenuShow",q="ucs:utilityMenuItemClick";var p='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div>'+'<a target="{target}" {actionData} href="{url}" {disabledAria}>'+"{icon}"+"{menuText}"+"</a></div></li>{separatorBottom}",x='{separatorTop}<li class="{isDisabled} {isActive} {menuClass}"><div>'+'<a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>'+"{icon}"+"{menuText}"+"</a></div></li>{separatorBottom}",o='<span class="yucs-separator" role="presentation"></span>',i="click",k="mouseover",v="focus",t="a",j="role",c="tabIndex",h="yucs-hide",b="iframe",n="ul",e="li",r="parentNode",w="http://l.yimg.com/a/lib/ush/icon.gif",f="https://s.yimg.com/lq/lib/ush/icon.gif";d.ucs.HelpMenu=function(y){this.menuContainer=y.ancestor("div");this.shown=false;this.helpLink=d.one("#yucs-help_button");this.helpLink.setAttribute("data-mad","true");this.previewPanel=d.one("#yucs-help_inner");this.ylt=this.previewPanel.getAttribute("data-yltmenushown");this.PANEL_OFFSET=30;this.PANEL_OFFSET_Y=3;this.headerNode=d.one("#yucs");d.ucs.HelpMenu.superclass.constructor.apply(this,[this.menuContainer,{panelSelector:"#yucs-help_inner"}]);this._initCustomEvents();y.removeClass("yucs-hm-activate");};d.extend(d.ucs.HelpMenu,d.ucs.MenuUtils,{_initCustomEvents:function(){this.publish(u,{broadcast:2,emitFacade:true});this.publish(g,{broadcast:2,emitFacade:true});this.publish(m,{broadcast:2,emitFacade:true});this.publish(l,{broadcast:2,emitFacade:true});this.publish(a,{broadcast:2,emitFacade:true});this.publish(q,{broadcast:2,emitFacade:true});d.Global.on("ucs:utilityMenuItems",this._handleHelpMenuItems,this,{"location":"top","menuType":"minty-utility-item"});d.Global.on("ucs:helpMenuItems",this._handleHelpMenuItems,this,{"location":"bottom","menuType":"minty-help-item"});d.Global.on("ucs:helpDebugMenuItems",this._handleHelpDebugMenuItems,this,{"location":"bottom","menuType":"minty-debug-item"});},_showMenu:function(y){if(this.previewPanel.hasClass("yucs-hide")){this._sendBeacon();}d.ucs.HelpMenu.superclass._showMenu.apply(this,arguments);if(d.one("#yucs").getAttribute("data-property")==="mail"){this.menu.all("li").addClass("yucs-hide");}if(y&&(y.ctrlKey||y.metaKey)&&y.shiftKey){this.fire(g);if(this.shown===false){d.later(4000,this,function(){this.fire(g);});}else{this._showDebugMenuItems();}}else{this.fire(u);this.fire(a);if(this.shown===false){d.later(4000,this,function(){this.fire(u);this.fire(a);});}else{this._showMenuItems();}}this._setPosition();},_showDebugMenuItems:function(){this.shown=true;this.menu.all("li").addClass("yucs-hide");this.menu.all("span.minty-item").setStyle("display","none");this.menu.all("li.debug-item").removeClass("yucs-hide");this.menu.all("span.debug-item").setStyle("display","block");},_showMenuItems:function(){this.shown=true;this.menu.all("li").removeClass("yucs-hide");this.menu.all("span.minty-item").setStyle("display","block");this.menu.all("li.debug-item").addClass("yucs-hide");this.menu.all("span.debug-item").setStyle("display","none");this._destructAria();this._initAria();},_setPosition:function(){if(true){this.mailIcon=d.one("#yucs-help_button");var B=this.previewPanel.one(".yucs-dock"),z=B&&B.get("offsetWidth"),A,y=this.headerNode.get("offsetHeight");if(this.rtl){this.previewPanel.setX(Math.round(this.headerNode.getX()+this.PANEL_OFFSET));}else{this.previewPanel.setX(Math.round(this.headerNode.getX()+this.headerNode.get("offsetWidth")-this.panel.get("offsetWidth")-2));}if(d.one("#search_hot_keyword_block")){this.panel.setY((this.headerNode.getY()+y)-this.PANEL_OFFSET_Y-30);}else{if(y>0){this.panel.setY((this.headerNode.getY()+y)-this.PANEL_OFFSET_Y);}else{this.panel.setY(this.mailIcon.getY()+this.mailIcon.get("offsetHeight")+3);}}if(B){A=(this.mailIcon.get("offsetWidth")/2)-(z/2);B.setX(this.mailIcon.getX()+A);}}},_handleKeyup:function(y){if(27===y.keyCode||9===y.keyCode){this.menu.one("a").focus();this._hideMenu();}else{if(40===y.keyCode&&!this.keyedup){if(this.panel.one("a")){this._showMenu(y);this.panel.one("a").focus();}this.keyedup=true;}}},_handleHelpMenuItems:function(D,C){var z=C&&C.location||"top",B=C&&C.menuType||"minty-help-item",A,y;if(!D.menuGroups||!D.menuGroups.length){return;}A=D.menuGroups;y=this.menu.one("#yuhead-help-panel");if(D.reset&&y){y.all("."+B).remove(true);}this._addMenuGroups(A,z,false,B);this._showMenuItems();},_handleHelpDebugMenuItems:function(z){var y;if(!z.menuGroups||!z.menuGroups.length){return;}y=z.menuGroups;itemList=this.menu.one("#yuhead-help-panel");if(z.reset&&itemList){itemList.all(".minty-debug-item").remove(true);}this._addMenuGroups(y,"top",true,"minty-debug-item");this._showDebugMenuItems();},_handleMenuItemClick:function(E){var D,A,y,z;D=E.target;D=D.ancestor("a",true);A=D.getAttribute("data-mad");y=D.getAttribute("data-customevt");z=D.ancestor("li").hasClass("disabled");if(z){E.halt();return;}if(y){E.preventDefault();}if(!z){var C={actionData:A};var B=D.ancestor("li");if(B.hasClass("debug-item")){this.fire(l,C);}else{if(B.hasClass("minty-utility-item")){this.fire(q,C);}else{this.fire(m,C);}}}},_addMenuGroups:function(B,H,F,G){var D=this.menu.one("#yuhead-help-panel"),y="",z,C=B.length,A,E;z=D.hasChildNodes();for(A=0;A<C;A++){E=B[A].length;if(H==="bottom"){if(A>0){B[A][0].separatorTop=true;}}else{if(A<(C-1)||z){B[A][E-1].separatorBottom=true;}}y+=this._addMenuGroup(B[A],F,G);}if(D.ancestor("div.yucs-yql_loading")){D.ancestor("div.yucs-yql_loading").removeClass("yucs-yql_loading");}if(H==="bottom"){D.append(y);}else{D.prepend(y);}if(D.one(".yucs-keepatbottom")){D.all(".yucs-keepatbottom").each(function(I){D.append(I);});}},_addMenuGroup:function(z,C,B){var D="",y=z.length,A;for(A=0;A<y;A++){if(C){z[A].isDebugItem=true;z[A].menuClass=B+" debug-item";}else{z[A].isDebugItem=false;z[A].menuClass=B+" minty-item";
}D+=this._addMenuItem(z[A],B);}return D;},_addMenuItem:function(A,z){var y="";if(A.isActive){A.checkedAria='aria-checked="true"';}else{A.checkedAria="";}if(A.isDisabled){A.disabledAria='aria-disabled="true"';}else{A.disabledAria="";}switch(A.actionType){case"link":y=d.substitute(p,A,this._processTemplateValue);break;case"customEvent":y=d.substitute(x,A,this._processTemplateValue);break;default:break;}if(y){if(A.isDebugItem){y=y.replace(/separator/,"separator debug-item "+z);}else{y=y.replace(/separator/,"separator minty-item "+z);}}return y;},_processTemplateValue:function(z,A,B){var C="";var y=(document.location.protocol==="https:")?f:w;switch(z){case"icon":if(A!==undefined){if(A==="available"){C='<img src="'+y+'" class="yucs-opi available"/>';}else{if(A==="offline"){C='<img src="'+y+'" class="yucs-opi offline"/>';}else{if(A==="invisible"){C='<img src="'+y+'" class="yucs-opi invisible"/>';}else{if(A==="busy"){C='<img src="'+y+'" class="yucs-opi busy"/>';}else{if(A==="idle"){C='<img src="'+y+'" class="yucs-opi idle"/>';}else{C='<img src="'+A+'" />';}}}}}}break;case"separatorTop":if(A){C=o;}break;case"separatorBottom":if(A){C=o;}break;case"actionData":if(A){C='data-mad="'+A+'"';}break;case"isDisabled":if(A){C="disabled";}break;case"isActive":if(A){C="sp active";}break;case"checkedAria":C=A;break;default:C=A;break;}return C;},_sendBeacon:function(){if(this.ylt){window.ucs._sendBeacon(this.ylt+"?t="+Math.random());}}});d.augment(d.ucs.HelpMenu,d.EventTarget);},"1.0",{requires:["oop","node","event-custom","substitute","ucs-menu-utils"]});(function(){ucs.YObj.use("node","ucs-helpmenu",function(c){var b=c.one("#yucs").all(".yucs-hm-activate"),a;b.each(function(d){a=new c.ucs.HelpMenu(d);});});})();if(!window.ucs){window.ucs={};}window.ucs.api=window.ucs.api||{};YUI.add("ucs-rapid",function(a){a.namespace("ucs");var d="ucs-rapid:",h=d+"click",g=d+"event",b=d+"destroy-instance",c=d+"addmodules",f=d+"removemodules",i=d+"refreshmodules",e=null;a.ucs.Rapid=function(j,l,k){this.container=j;if(!l){return;}this.rapidConfig=l;this.tracked_mods=k;this._init();};a.ucs.Rapid.prototype={_init:function(){if(!e){if(typeof YAHOO!=="undefined"&&typeof YAHOO.i13n!=="undefined"&&typeof YAHOO.i13n.Rapid!=="undefined"){e=new YAHOO.i13n.Rapid(this.rapidConfig);}}if(e){e.addModules(this.tracked_mods);this._publish();}},_publish:function(){a.Global.on(h,this._handleBeaconing,this,"click");a.Global.on(g,this._handleBeaconing,this,"event");a.Global.on(b,this._handleDestroyInstance,this);a.Global.on(c,this.addModules,this);a.Global.on(f,this.removeModule,this);a.Global.on(i,this.refreshModule,this);},getUHRapidInstance:function(){return e;},_handleBeaconing:function(k,j){if(!k){a.log("data is absent.");return;}if(!e){a.log("uhRapidInstance is absent.");return;}if(!k.keys){a.log("no data keys. setting it to empty");k.keys={};}if(!k.outcome){a.log("no outcome. setting it to null");}if(j=="click"){if(!k.sec){a.log("SEC is absent. Using default sec.");k.sec="uh-d";}if(!k.slk){a.log("SLK is absent. Using default slk.");k.slk="hd";}if(!k._pValue){a.log("_pValue is absent. Using default _pValue.");k._pValue=0;}this.beaconClick(k.sec,k.slk,k._pValue,k.keys,k.outcome);}else{if(!k.eventName){a.log("event Name is absent.");return;}this.beaconEvent(k.eventName,k.keys,k.outcome);}},beaconClick:function(k,j,n,m,l){if(e){e.beaconClick(k,j,n,m,l);}else{a.log("no rapid instance available. cant fire beacon click.");}},beaconEvent:function(j,k,l){if(e){e.beaconEvent(j,k,l);}else{a.log("no rapid instance available. cant fire beacon event.");}},addModules:function(l,k,j){k=false;if(e){if(!this.isModuleTracked(l)){e.addModules(l,k,j);}else{a.log("module is already tracked");}}else{a.log("no rapid instance available. cant add module.");}},removeModule:function(j){if(e){e.removeModule(j);}else{a.log("no rapid instance available. cant remove module.");}},refreshModule:function(m,k,l,j){k=false;if(e){if(this.isModuleTracked(m)){e.refreshModule(m,k,l,j);}else{a.log("module is not tracked, we cant do a refreshModule");}}else{a.log("no rapid instance available.");}},isModuleTracked:function(j){if(e){return e.isModuleTracked(j);}else{a.log("no rapid instance available. dont know if module is present.");}},_handleDestroyInstance:function(){if(e){this.rapidConfig={};e.destroy();e=null;}else{a.log("no rapid instance available. cant destroy instance.");}}};},"0.1",{requires:["event-custom","node"]});(function(){window.ucs.YObj.use("node","ucs-rapid",function(d){var b=d.one(".yucs"),n=d.one(".yucs").getAttribute("data-spaceid"),o=d.one(".yucs").getAttribute("data-property"),e=d.one(".yucs").getAttribute("data-device"),k=d.one("#yucs-meta").getAttribute("data-test_id"),g=d.one("#yucs-meta").getAttribute("data-languagetag"),l=d.one("#yucs-meta").getAttribute("data-forcecobrand"),p=d.one("#yucs-meta").getAttribute("data-cobrand"),j="standard",m=e&&e.match(/smartphone/gi),i=e&&e.match(/tablet/gi),c=d.one(".yucs").getAttribute("data-stencil"),f,h={},a={};if(!b){d.log("UH is absent");return;}if(l&&l!="standard"){j=l;}else{if(p&&p!="standard"){j=p;}}if(typeof YAHOO!=="undefined"&&typeof YAHOO.i13n!=="undefined"&&typeof YAHOO.i13n.SPACEID!=="undefined"){n=YAHOO.i13n.SPACEID;}if(typeof YAHOO!=="undefined"&&typeof YAHOO.i13n!=="undefined"&&typeof YAHOO.i13n.WEBWORKER_FILE!=="undefined"){f=YAHOO.i13n.WEBWORKER_FILE;}if(!n){n="1197757397";}if(b&&!window.ucs.rapid){a={spaceid:n,keys:{site:o,ver:"uh3s",psp:j,lang:g},apv:false,client_only:0,pageview_on_init:false,rapid_noclick_resp:"uh-ignore-rapid"};if(typeof YAHOO!=="undefined"&&typeof YAHOO.i13n!=="undefined"&&typeof YAHOO.i13n.TEST_ID!=="undefined"){a.test_id=YAHOO.i13n.TEST_ID;}else{if(k){a.test_id=k;}}if(m){if(c=="true"){h={"NavMenu":"uh-m","MobileUH":"uh-m","SubMenuCountries":"uh-m","searchbox-mojit":"uh-m"};}else{if(o=="frontpage"&&l=="att"){h={"yucs":"uh-m","yucs-sidebar":"uh-m","yucs-search":"uh-m"};}else{h={"yucs":"uh-m","yucs-sidebar":"uh-m"};}}}else{if(i){if(c=="true"){h={"NavMenu":"uh-t","MobileUH":"uh-t","SubMenuCountries":"uh-t"};}else{h={"yucs":"uh-t","yucs-sidebar":"uh-t"};}}else{if(c=="true"){h={"masterNav":"uh-d","uhWrapper":"uh-d"};}}}if(o=="answers"){if(!f){f="/static/js/rapidworker-1.0.js";}a.webworker_file=f;}if(o=="groups"){if(!f){f="/js/rapid_worker.js";}a.webworker_file=f;}if(o=="news"||o=="sports"||o=="finance"||o=="music"||o=="tv"||o=="weather"||o=="celebrity"||o=="homes"){if(!f){f="/__rapid-worker-1.1.js";}a.webworker_file=f;}if(o.match(/mag_/gi)){if(!f){f="/lib/metro/g/uicontrib/rapid_worker_1.1.1.js";}a.webworker_file=f;}if(o=="frontpage"){a.ywa={project_id:10001806365479,host:"y.analytics.yahoo.com"};}window.ucs.rapid=new d.ucs.Rapid(b,a,h);}});}());YUI.add("gallery-event-pasted",function(b){function a(f,c){var h=c&&b.one(c).get("tagName")||"div",d=document.createElement(h),g=(f.indexOf("on")===0?f:"on"+f),e=(g in d);if(!e){d.setAttribute(g,"");e=b.Lang.isFunction(d[g]);}if(e&&!b.Node.DOM_EVENTS[g.substr(2)]){b.Node.DOM_EVENTS[g.substr(2)]=1;}return e;}b.Event.define("pasted",{on:function(l,d,h){var n=d.args&&d.args[0],j=l.test("input[type=text],input[type=password],textarea")?"value":"text",i=b.guid(),f=function(o,p){if(!n||o!==p){h.fire({prevVal:o,newVal:p});}},k,m,g,c,e;if(a("paste",l)){l.on(i+"|paste",function(o){k=this.get(j);b.later(0,null,function(){m=o.target.get(j);f(k,m);});});}else{if(a("input",l)){c=50;e=function(o){if(o.type==="keypress"&&o.ctrlKey){return;}g={sel:this.get("selectionEnd")-this.get("selectionStart"),val:this.get(j),mtime:+(new Date())};};l.on(i+"|keypress",e);l.on(i+"|select",e);l.on(i+"|input",function(o){k=g?g.val:"";m=this.get(j);if(g&&m.length===(k.length-g.sel)){}else{if(!g||(+(new Date())-g.mtime)>c){f(k,m);}}e.call(this,o);});d._state=g;}else{}}d._evtGroup=i;},detach:function(c,d,e){c.detachAll(d._evtGroup+"|*");}});},"gallery-2010.08.11-20-39",{requires:["event-synthetic"]});YUI.add("input-mask",function(g){var e,d,b,a={srcNode:".phone-number-input",mask:"+1(   )   -    ",maskLetter:" "},c=function(i){var j,h;if(i.get("selectionStart")!==undefined){j=i.get("selectionStart");h=i.get("selectionEnd");}else{if(document.selection){i.focus();d=document.selection.createRange();j=-d.duplicate().moveStart("character",-i.get("value").length);h=j+d.text.length;}}return{start:j,end:h};},f=function(h,i){e=h.getDOMNode();if(e.setSelectionRange){e.focus();e.setSelectionRange(i.start,i.end);}else{if(e.createTextRange){b=e.createTextRange();b.collapse(true);b.moveEnd("character",i.end);b.moveStart("character",i.start);b.select();}}};g.InputMask=function(k){this.config={};this.config.srcNode=k.srcNode||a.srcNode;this.mask=k.mask||a.mask;this.maskLetter=k.maskLetter||a.maskLetter;this.firstMaskPos=this.mask.indexOf(this.maskLetter);this.lastMaskPos=this.mask.lastIndexOf(this.maskLetter)+1;this.notInputPos=[];this.maskPhoneLength=this.mask.match(new RegExp(this.maskLetter,"g")).length;this.input=g.one(this.config.srcNode);var h=this.mask,i=h.search(new RegExp("[^"+this.maskLetter+"]")),j=0;while(i>-1){this.notInputPos.push(i+j);j+=i+1;h=h.substr(i+1);i=h.search(new RegExp("[^"+this.maskLetter+"]"));}};g.InputMask.prototype={setCaret:function(j){var h=this.input,i=h.get("value");if(!(i.charAt(j.end)>="0"&&i.charAt(j.end)<="9")&&i.charAt(j.end)!==this.maskLetter&&j.end<this.mask.length||j.start<this.firstMaskPos){if(j.start===j.end){this.setCaret({start:j.start+1,end:j.end+1});}else{this.setCaret({start:j.start,end:j.end+1});}return;}f(h,j);},getCaret:function(){return c(this.input);},caretLeft:function(i,k){var j=k.start,h=k.end;if(h<=this.firstMaskPos){k={start:this.firstMaskPos,end:this.firstMaskPos};}else{if(j<=this.firstMaskPos&&h>this.firstMaskPos){k={start:this.firstMaskPos,end:this.firstMaskPos};}else{if(i.charAt(j-1)===")"||i.charAt(j-1)==="-"){k={start:j-2,end:j-2};}else{k={start:j-1,end:j-1};}}}this.setCaret(k);return k;},setValue:function(n,o){var m,l,h,k=n.substr(this.firstMaskPos).replace(new RegExp("[^0-9"+this.maskLetter+" ]","g"),"");while(k.length<this.maskPhoneLength+1){k=k.concat(this.maskLetter);}k=k.substr(0,this.maskPhoneLength);m=this.mask;for(l=0,h=0;l<m.length;++l){if(m.charAt(l)===this.maskLetter){m=m.substring(0,l)+k.charAt(h)+m.substr(l+1);h++;}}this.input.set("value",m);this.setCaret(o);},getPhoneNumberOnly:function(){var h=this.input.get("value");return h.replace(/[^0-9]/g,"");},render:function(){var h=this,j=this.input,i={onFocus:function(k){if(!j.get("value")){h.setValue(h.mask,{start:h.firstMaskPos,end:h.firstMaskPos});}},onPaste:function(l){var p=j.get("value"),q=h.getCaret(),o=p.substr(h.firstMaskPos).replace(/[^0-9]/g,""),k=o.length,n,m=0;for(n=0;n<h.notInputPos.length;++n){if(h.notInputPos[n]>h.firstMaskPos&&h.notInputPos[n]-h.firstMaskPos<k+m){m++;}}q.start=k+m+h.firstMaskPos;q.end=q.start;h.setValue(p,q);},afterClick:function(k){var l=j.get("value");if(!l||l===h.mask){h.setCaret({start:h.firstMaskPos,end:h.firstMaskPos});}},onKeyDown:function(l){var o="",r=h.getCaret(),q=r.start,k=r.end,p=j.get("value"),n=l.keyCode,m=String.fromCharCode(n);if(l.keyCode==9){return;}l.preventDefault();if(n===8||n===46){r=h.caretLeft(p,r);o=p.substring(0,r.start)+p.substr(r.start+1);h.setValue(o,r);}else{if(n===37){if(l.shiftKey&&q>h.firstMaskPos){h.setCaret({start:q-1,end:k});}else{if(l.metaKey){h.setCaret({start:h.firstMaskPos,end:h.firstMaskPos});}else{if(q>h.firstMaskPos){h.caretLeft(p,{start:q,end:q});}else{h.setCaret({start:h.firstMaskPos,end:h.firstMaskPos});}}}}else{if(n===39){if(l.shiftKey){h.setCaret({start:r.start,end:r.end+1});}else{if(l.metaKey){h.setCaret({start:h.lastMaskPos,end:h.lastMaskPos});}else{if(k<h.lastMaskPos){h.setCaret({start:k+1,end:k+1});}else{h.setCaret({start:h.lastMaskPos,end:h.lastMaskPos});}}}}}}},onKeyPress:function(m){var o="",r=h.getCaret(),q=r.start,l=r.end,p=j.get("value"),k=m.charCode||m.keyCode,n=String.fromCharCode(k);if(m.altKey||m.ctrlKey||m.metaKey){return;}m.preventDefault();if(k>=48&&k<=57){o=p.substring(0,q)+n+p.substr(l);h.setValue(o,{start:q+1,end:q+1});}}};if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)){return;}else{j.on("valuechange",i.onValueChange);j.on("keydown",i.onKeyDown);j.on("keyup",i.onKeyPress);j.on("focus",i.onFocus);j.on("pasted",i.onPaste);j.after("click",i.afterClick);}}};},"0.0.1",{requires:["event-valuechange","event-base-ie","gallery-event-pasted","event-focus"]});if(typeof YAHOO=="undefined"||!YAHOO){var YAHOO={};}if(typeof YAHOO.UCS=="undefined"||!YAHOO.UCS){YAHOO.UCS={};}YAHOO.UCS.Get_The_App_Promo=(function(){var Z=null,E=null,ab=null,ad=null,L=null,m=null,q=null,ac=null,K=null,M=null,r=null,y=null,H=null,C=null,S=null,z=null,i=null,e=null,u=null,D=null,I=null,R=583,c=709,p=false,aa="",G="",F=false,J=document.getElementById("yucs")||document.getElementById("UH"),x=null,ae=null,o=document.getElementById("yucs_gta"),W=false,af=navigator.appName=="Microsoft Internet Explorer",Y=function(ai,ah){YUI().use("node",function(aj){aj.Global.fire(ai,ah);});},v=function(aj){var ah=0,ai=aj.style;if(af){ah=parseFloat(ai.filter.substring(14))/100;}else{ah=parseFloat(ai.opacity);}return ah;},V=function(aj,ah){var ai=aj.style;if(af){ai.opacity=ah;ai.filter="alpha(opacity="+ah*100+")";}else{ai.opacity=ah;}},g=function(){var ai=document,ah=ai.body,aj=ai.documentElement;return Math.max(Math.max(ah.scrollHeight,aj.scrollHeight),Math.max(ah.offsetHeight,aj.offsetHeight),Math.max(ah.clientHeight,aj.clientHeight));},N=function(){var ah=460;if(document.body&&document.body.offsetWidth){ah=document.body.offsetHeight;}if(document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth){ah=document.documentElement.offsetHeight;}if(window.innerWidth&&window.innerHeight){ah=window.innerHeight;}return ah;},X=function(){var ai=document,ah=ai.body,aj=ai.documentElement;return Math.max(Math.max(ah.scrollWidth,aj.scrollWidth),Math.max(ah.offsetWidth,aj.offsetWidth),Math.max(ah.clientWidth,aj.clientWidth));},a=function(ah,ai){if(ah&&ai){aa=ah;G=ai;return true;}return false;},h=function(ai,aj,ah){if(ai.attachEvent){ai.attachEvent("on"+aj,ah);}else{ai.addEventListener(aj,ah,false);}},t=(function(){var aj=document.createElement("div"),ai=["O","Moz","ms"],ah=ai.length;while(ah--){if(ai[ah]+"Transition" in aj.style){C=ai[ah];return true;}}return false;}()),w=function(ai){var ah=ai.style;if(af){ah.filter="alpha(opacity=0)";}else{ah.opacity=0;}},f=function(){Z.style.display="none";M.style.display="none";E.style.display="none";d();},B=function(){J.className=J.className.replace(new RegExp("\\b"+r+"\\b"),"");F=true;Z.className="uh-dmos-overlay";E.style.height=0+"px";if(S!==null){S.style.display="none";}if(t){ad.className="uh-dmos-msgbox uh-dmos-hide-anim";}else{e=setInterval(function(){var ah=v(ad)-0.1;V(ad,ah);if(v(ad).toFixed(1)=="0.1"){clearInterval(e);f();}},56);}document.getElementById("uh-dmos-imagebg").style.display="block";document.getElementById("uh-dmos-bd").style.display="block";document.getElementById("uh-dmos-success-message").style.display="none";document.getElementById("input-id-phoneNumber").value="";document.getElementById("phone-prompt").style.display="none";document.getElementById("uh-dmos-text-disclaimer").style.display="block";document.getElementById("phone-or-email-prompt").style.display="none";},n=function(){if(x&&x.beaconClick){if(p){x.beaconClick("signup","close","",{t1:"a3",t2:"signup",t3:"close",t4:aa,t5:G,elm:"btn",itc:1,cat:"gtaa"});}else{x.beaconClick("signup","close","",{t1:"a3",t2:"signup",t3:"close",elm:"btn",itc:1,cat:"gtaa"});}}else{if(p){ae={"sec":"signup","slk":"close","_pValue":"","keys":{t1:"a3",t2:"signup",t3:"close",t4:aa,t5:G,elm:"btn",itc:1,cat:"gtaa"}};}else{ae={"sec":"signup","slk":"close","_pValue":"","keys":{t1:"a3",t2:"signup",t3:"close",elm:"btn",itc:1,cat:"gtaa"}};}Y("ucs-rapid:click",ae);}B();},A=function(){if(x&&x.beaconClick){if(p){x.beaconClick("signup","close","",{t1:"a3",t2:"signup",t3:"sbmt",t4:aa,t5:G,elm:"btn",itc:1,cat:"gtaa"});}else{x.beaconClick("signup","close","",{t1:"a3",t2:"signup",t3:"sbmt",elm:"btn",itc:1,cat:"gtaa"});}}else{if(p){ae={"sec":"signup","slk":"close","_pValue":"","keys":{t1:"a3",t2:"signup",t3:"sbmt",t4:aa,t5:G,elm:"btn",itc:1,cat:"gtaa"}};}else{ae={"sec":"signup","slk":"close","_pValue":"","keys":{t1:"a3",t2:"signup",t3:"sbmt",elm:"btn",itc:1,cat:"gtaa"}};}Y("ucs-rapid:click",ae);}B();},T=function(ah,ai){return ah.className&&new RegExp("(^|\\s)"+ai+"(\\s|$)").test(ah.className);},l=function(){if(x&&x.beaconClick){if(p){x.beaconClick("signup","apple-btn","",{t1:"a4",t2:"signup",t3:"btn",t4:aa,t5:G,elm:"btn",cat:"gtaa"});}else{x.beaconClick("signup","apple-btn","",{t1:"a4",t2:"signup",t3:"btn",elm:"btn",cat:"gtaa"});}}else{if(p){ae={"sec":"signup","slk":"gta-btn","_pValue":"","keys":{t1:"a4",t2:"signup",t3:"btn",t4:aa,t5:G,elm:"btn",cat:"gtaa"}};}else{ae={"sec":"signup","slk":"gta-btn","_pValue":"","keys":{t1:"a4",t2:"signup",t3:"btn",elm:"btn",cat:"gtaa"}};}Y("ucs-rapid:click",ae);}},ag=function(){if(x&&x.beaconClick){if(p){x.beaconClick("signup","android-btn","",{t1:"a4",t2:"signup",t3:"btn",t4:aa,t5:G,elm:"btn",cat:"gtaa"});}else{x.beaconClick("signup","android-btn","",{t1:"a4",t2:"signup",t3:"btn",elm:"btn",cat:"gtaa"});}}else{if(p){ae={"sec":"signup","slk":"gta-btn","_pValue":"","keys":{t1:"a4",t2:"signup",t3:"btn",t4:aa,t5:G,elm:"btn",cat:"gtaa"}};}else{ae={"sec":"signup","slk":"gta-btn","_pValue":"","keys":{t1:"a4",t2:"signup",t3:"btn",elm:"btn",cat:"gtaa"}};}Y("ucs-rapid:click",ae);}},s=function(){h(L,"click",n);if(ac){h(ac,"click",A);}if(appleBtn){h(appleBtn,"click",l);}if(androidBtn){h(androidBtn,"click",ag);}ad.className="uh-dmos-msgbox";ab.className="uh-dmos-show";j();if(t){ad.className="uh-dmos-msgbox uh-dmos-msgbox-show-anim";}else{w(ad);i=setInterval(function(){var ah=v(ad)+0.1;V(ad,ah);if(ah>=1){clearInterval(i);}},56);}},O=function(){Z.style.display="block";M.style.display="block";E.style.display="block";E.style.height=N()+"px";Z.style.height=g()+"px";Z.style.left=0+"px";Z.style.top=0+"px";Z.style.bottom=0+"px";Z.style.visibility="visible";if(t){ad.className="uh-dmos-msgbox";Z.className="uh-dmos-overlay uh-dmos-overlay-show-anim";}else{w(Z);z=setInterval(function(){var ah=v(Z)+0.2;V(Z,ah);if(ah>=0.8){s();clearInterval(z);}},56);}},k=function(ai){var ah=new Image();ah.height=0;ah.width=0;ah.src="https://geo.yahoo.com/t"+ai;},P=function(){var ai=document.getElementById("input-id-phoneNumber").value,ah=/^(\+1| )?\(?\d{3}\)? ?? ?\d{3} ?\-? ?\d{4}$/;
if(ah.test(ai)){return 1;}else{if(!ah.test(ai)&&ai==="+1(   )   -    "){return false;}else{if(!ah.test(ai)&&ai!==""){return -2;}else{return false;}}}},Q=function(){if(F){d();f();}F=false;},b=function(){var ah={"O":"oTransitionEnd","Moz":"transitionend","Webkit":"webkitTransitionEnd","ms":"transitionend"};d();W=ah[C];if(window.addEventListener){Z.addEventListener(W,s,false);ad.addEventListener(W,Q,false);}},d=function(){if(window.addEventListener){Z.removeEventListener(W,s,false);ad.removeEventListener(W,Q,false);}},j=function(){E.style.height=N()+"px";Z.style.height=g()+"px";M.style.left="50%";M.style.marginLeft=-M.offsetWidth/2+"px";},U=function(){E=document.getElementById("uh-dmos-wrapper");Z=document.getElementById("uh-dmos-overlay");ab=document.getElementById("uh-dmos-container");ad=document.getElementById("uh-dmos-msgbox");L=document.getElementById("uh-dmos-msgbox-close-btn");q=document.getElementById("input-id-phoneNumber");M=document.getElementById("uh-dmos-container");K=document.getElementById("uh-dmos-subscribe");ac=document.getElementById("uh-dmos-successBtn");appleBtn=document.getElementById("apple-link");androidBtn=document.getElementById("android-link");};return{_enableSubscribe:function(ah){var aj=document.getElementById("input-id-phoneNumber").value.replace(/\D/g,""),ai="sbmt";if(ah===1){document.getElementById("uh-dmos-imagebg").style.display="none";document.getElementById("uh-dmos-bd").style.display="none";document.getElementById("uh-dmos-success-message").style.display="block";ai+=" p-y";if(x&&x.beaconClick){if(p){x.beaconClick("signup",ai,"",{t1:"a3",t2:"signup",t3:"sbmt",t4:aa,t5:G,elm:"btn",itc:1,cat:"gtaa"},"sbmt");}else{x.beaconClick("signup",ai,"",{t1:"a3",t2:"signup",t3:"sbmt",elm:"btn",itc:1,cat:"gtaa"},"sbmt");}}else{if(p){ae={"sec":"signup","slk":ai,"_pValue":"","keys":{t1:"a3",t2:"signup",t3:"sbmt",t4:aa,t5:G,elm:"btn",itc:1,cat:"gtaa"}};}else{ae={"sec":"signup","slk":"cnfrm-pop","_pValue":"","keys":{t1:"a3",t2:"signup",t3:"sbmt",elm:"btn",itc:1,cat:"gtaa"}};}Y("ucs-rapid:click",ae);}if(x&&x.beaconEvent){if(p){x.beaconEvent("secvw",{t1:"a3",t2:"signup",t3:"confirm",t4:aa,t5:G,sec:"signup",slk:"cnfrm-pop",cat:"gtaa"});}else{x.beaconEvent("secvw",{t1:"a3",t2:"signup",t3:"confirm",sec:"signup",slk:"cnfrm-pop",cat:"gtaa"});}}else{if(p){ae={"eventName":"secvw","keys":{t1:"a3",t2:"signup",t3:"confirm",t4:aa,t5:G,sec:"signup",slk:"cnfrm-pop",cat:"gtaa"}};}else{ae={"eventName":"secvw","keys":{t1:"a3",t2:"signup",t3:"confirm",sec:"signup",slk:"cnfrm-pop",cat:"gtaa"}};}Y("ucs-rapid:event",ae);}return true;}else{if(ah===-1){document.getElementById("phone-prompt").style.display="none";document.getElementById("uh-dmos-text-disclaimer").style.display="block";document.getElementById("phone-or-email-prompt").style.display="none";}else{if(ah===-2){document.getElementById("phone-prompt").style.display="block";document.getElementById("uh-dmos-text-disclaimer").style.display="block";document.getElementById("phone-or-email-prompt").style.display="none";}else{document.getElementById("phone-prompt").style.display="none";document.getElementById("uh-dmos-text-disclaimer").style.display="block";document.getElementById("phone-or-email-prompt").style.display="block";}}}return false;},enableSubscribe:function(){var ah=P();this._enableSubscribe(ah);},checkFields:function(){var ah=P();if(ah==1){return true;}this._enableSubscribe(ah);return false;},submitForm:function(aj){var ak,ah;if(YAHOO.UCS.Get_The_App_Promo.checkFields()){ak=document.getElementById("input-id-phoneNumber").value.replace(/\D/g,"");var ai=J.getAttribute("data-property");window.ucs.YObj.use("jsonp","node",function(am){var al="https://ucs.netsvs.yahoo.com/json/gtaa/index.php?phoneNumber="+encodeURIComponent(ak)+"&wssid="+encodeURIComponent(am.one("#uh-dmos-subscribe").getAttribute("data-crumb"))+"&appid="+encodeURIComponent(r)+"&button_revision="+encodeURIComponent(y)+"&modal_revision="+encodeURIComponent(H)+"&property="+encodeURIComponent(ai)+"&format=json&callback={callback}";am.jsonp(al,{on:{success:function(an){if(an&&an.result){YAHOO.UCS.Get_The_App_Promo._enableSubscribe(an.result);}},failure:function(an){}}});});}},displayModalPopup:function(ah){if(x&&x.beaconClick){if(p){x.beaconClick("signup","gta-btn","",{t1:"a4",t2:"signup",t3:"btn",t4:aa,t5:G,elm:"btn",cat:"gtaa"});}else{x.beaconClick("signup","gta-btn","",{t1:"a4",t2:"signup",t3:"btn",elm:"btn",cat:"gtaa"});}}else{if(p){ae={"sec":"signup","slk":"gta-btn","_pValue":"","keys":{t1:"a4",t2:"signup",t3:"btn",t4:aa,t5:G,elm:"btn",cat:"gtaa"}};}else{ae={"sec":"signup","slk":"gta-btn","_pValue":"","keys":{t1:"a4",t2:"signup",t3:"btn",elm:"btn",cat:"gtaa"}};}Y("ucs-rapid:click",ae);}if(x&&x.beaconEvent){if(p){x.beaconEvent("secvw",{t1:"a3",t2:"signup",t3:"signup",t4:aa,t5:G,sec:"signup",slk:"signup-pop",cat:"gtaa"});}else{x.beaconEvent("secvw",{t1:"a3",t2:"signup",t3:"signup",sec:"signup",slk:"signup-pop",cat:"gtaa"});}}else{if(p){ae={"eventName":"secvw","keys":{t1:"a3",t2:"signup",t3:"signup",t4:aa,t5:G,sec:"signup",slk:"signup-pop",cat:"gtaa"}};}else{ae={"eventName":"secvw","keys":{t1:"a3",t2:"signup",t3:"signup",sec:"signup",slk:"signup-pop",cat:"gtaa"}};}Y("ucs-rapid:event",ae);}if(E===null){U();if(!window.ucs){window.ucs={};}if(!window.ucs.YObj){if(document.getElementById("yUnivHead")&&document.getElementById("yUnivHead").getAttribute("data-property")){window.ucs.YObj=(function(){var ai=document.getElementById("yUnivHead");return(typeof window.Y!=="undefined"&&(ai&&ai.getAttribute("data-property")==="srp"))?window.Y:YUI();})();}}window.ucs.YObj.use("node","event","input-mask","base-ie","gallery-event-pasted","jsonp","json-parse",function(aj){var ai=new aj.InputMask({srcNode:null,mask:null});ai.render();aj.on("click",YAHOO.UCS.Get_The_App_Promo.submitForm,"#uh-dmos-subscribe");aj.on("keyup",function(an){var ak=YAHOO.UCS.Get_The_App_Promo,am=an.target.get("id"),al=(am==="input-id-phoneNumber"||am==="uh-dmos-subscribe");if(an.keyCode===13&&al){ak.submitForm(an);}},".uh-dmos-msgbox-canvas");
});}b();O();h(window,"resize",j);},init:function(){if(typeof YMedia!=="undefined"&&YMedia.rapid){x=YMedia.rapid;}var ak=o?o:null;if(ak){o.style.display="block";YUI().use("node",function(ap){var ao=J,an=false;if(ap.UA.ie&&ap.UA.ie>4&&ap.UA.ie<=7){an=true;}if(!an){for(var am=0;am<document.querySelectorAll(".yucs_gta").length;am++){ap.all(".yucs_gta").on("click",function(aq){aq.halt(true);r=ak.getAttribute("data-appid");y=ak.getAttribute("data-button-rev");H=ak.getAttribute("data-modal-rev");ao.className=ao.className+" "+r;if(a(y,H)){p=true;}ap.Global.fire("ucs-alert:show-overlay",{data:{id:r,name:"Get the app",type:"get_the_app",text:"Send me a link:",cnfrmText:"Thanks! A link has been sent."}});});}}});}else{var al=window.addEventListener?"addEventListener":"attachEvent";var aj=window[al];var ai=al=="attachEvent"?"onmessage":"message";if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var ah=new Number(RegExp.$1);if(ah===8){aj=document["attachEvent"];}}aj(ai,function(aq){if(aq.data){var ap=aq.data.split(","),ao=ap[0].split(":");if(ao[0]==="appid"){var ar=document.getElementById("yucs")||document.getElementById("UH"),am=ap[2].split(":"),an=ap[3].split(":");r=ao[1];y=am[1];H=an[1];ar.className=ar.className+" "+r;if(a(y,H)){p=true;}YAHOO.UCS.Get_The_App_Promo.displayModalPopup();}}},false);}}};})();YAHOO.UCS.Get_The_App_Promo.init();if(window.ucs&&window.ucs.YObj){(function(b){var c=((b.location.href.match(/ucs-combine=0/))?false:true),a={groups:{"ucs-alert-group":{async:false,base:"js/",root:"kx/yucs/uhc/alert/138/js/",combine:c,comboSep:"&",comboBase:"https://s.yimg.com/zz/combo?",maxURLLength:2000,modules:{"tinypopup":{path:"tinypopup-min.js",type:"js"},"adapter":{path:"adapter-min.js",type:"js"},"maskedinput":{path:"maskedinput-min.js",requires:["adapter"],type:"js"},"ucs-alert":{path:"alert-min.js",requires:["ucs-alert-tracker","ucs-alert-template","ucs-alert-view","event-custom","node","template","tinypopup"],type:"js"},"ucs-alert-tracker":{path:"alert-tracker-min.js",type:"js"},"ucs-alert-template":{path:"alert-template-min.js",requires:["template-micro"],type:"js"},"ucs-alert-view":{path:"alert-view-min.js",requires:["ucs-alert-template","view","intl","datatype-date-format","event-hover","ucs-alert-view-confirmation","ucs-alert-view-signup"],type:"js"},"ucs-alert-view-signup":{path:"alert-view-signup.js",type:"js"},"ucs-alert-view-confirmation":{path:"alert-view-confirmation.js",type:"js"}}}}};if(window.location.href.match(/screen.yahoo.com\/live\//gi)){a={groups:{"ucs-alert-group":{async:false,base:"js/",root:"kx/yucs/uhc/alert/138/js/",combine:c,comboSep:"&",comboBase:"https://s.yimg.com/zz/combo?",maxURLLength:2000,modules:{"tinypopup":{path:"tinypopup-min.js",type:"js"},"adapter":{path:"adapter-min.js",type:"js"},"maskedinput":{path:"maskedinput-min.js",requires:["adapter"],type:"js"},"ucs-alert":{path:"alert-min.js",requires:["ucs-alert-tracker","ucs-alert-template","ucs-alert-view","event-custom","node","template","tinypopup"],type:"js"},"ucs-alert-tracker":{path:"alert-tracker-min.js",type:"js"},"ucs-alert-template":{path:"alert-template-min.js",requires:["template-micro"],type:"js"},"ucs-alert-view":{path:"alert-view-min.js",requires:["ucs-alert-template","view","intl","datatype-date-format","event-hover","ucs-alert-view-confirmation","ucs-alert-view-signup"],type:"js"},"ucs-alert-view-signup":{path:"alert-view-signup.js",requires:["ucs-alert-add-to-calendar"],type:"js"},"ucs-alert-view-confirmation":{path:"alert-view-confirmation.js",requires:["ucs-alert-social-sharing","ucs-alert-recommendations"],type:"js"},"ucs-alert-add-to-calendar":{path:"alert-add-to-calendar-min.js",type:"js"},"ucs-alert-social-sharing":{path:"alert-social-sharing-min.js",type:"js"},"ucs-alert-recommendations":{path:"alert-recommendations-min.js",type:"js"}}},"stencil-plugins":{modules:{"stencil-carousel":{fullpath:"https://s.yimg.com/os/mit/td/stencil-2.0.8/stencil-carousel/stencil-carousel-min.js",type:"js",requires:"stencil-base"}}}}};}if(b.location.href.match(/filter=raw/)){a.filter="RAW";}YUI(a).use("ucs-alert",function(g){var f={},d=g.one("#yucs-alert").getAttribute("data-device"),e;g.publish("ucs-alert:init",{broadcast:2});if(!g.Lang.isObject(g.ucs)){return;}if(d){e=g.one("#yucs-alert").remove();if(d.match(/smartphone/gi)||d.match(/tablet/gi)){g.one("#outer-wrapper").append(e.getDOMNode());}else{g.one("body").prepend(e.getDOMNode());}}if(g.UA.android!==null&&g.UA.android!==0){g.one("#yucs-alert").addClass("android");}if(!g.Lang.isObject(b.ucs.Alert)||!(b.ucs.Alert instanceof g.ucs.Alert)){f=new g.ucs.Alert({ids:{meta:"#yucs-meta",root:"#yucs-alert",overlay:"#yucs-alert-overlay",input_phone:"#yucs-alert-phone",input_email:"#yucs-alert-email",button_submit:"#yucs-alert-subscribe",e_input_phone:"#yucs-alert-phone-prompt",e_input_email:"#yucs-alert-email-prompt",e_system:"#yucs-alert-system-prompt"},templates:{signup:"#yucs-alert-template-signup-view",confirmation:"#yucs-alert-template-confirmation-view"},enableAutoSuggest:0});f.on("init",function(){var h={},i={},j={};g.Global.fire("ucs-alert:init");if(b.location.href.match(/ucs-alert-id=/)){h=g.ucs.Alert.parseUrl(window.location.href,"query");h=g.QueryString.parse(h);if(g.Object.hasKey(h,"ucs-alert-id")){i=g.one("#"+h["ucs-alert-id"]);if(g.Lang.isObject(i)){g.Object.each(i.getData(),function(m,l){j[l]=m;});f.showOverlay(j);}else{g.log("Node not found. id="+h["ucs-alert-id"],"warn");}}else{g.log("Key not found in query string. key=ucs-alert-id","warn");}}});b.ucs.Alert=f;}});})(window);}